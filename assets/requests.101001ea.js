import{bB as ne,c as y,h as x,bH as je,bF as le,g as ke,l as U,bI as ee,bJ as L,cy as V,_ as J,p as d,t as b,d as a,bb as s,bR as te,v as t,a4 as n,bQ as X,F as j,aR as k,ag as g,an as v,c3 as Z,bO as w,bd as z,bw as M,ah as R,bU as Pe,r as G,bL as S,bW as Y,bM as ie,bN as N,aS as O,bX as B,bS as A,by as de,bP as ue,y as re,cz as me,w as Se,cA as Ve,bT as ce,cB as fe,cv as Fe,bZ as Ee}from"./index.86392f86.js";import{a as Te,Q as ae,c as Ae,b as se}from"./QTabPanels.9f815f25.js";import{a as _,Q as T}from"./QTable.5c49b4bd.js";const Qe=["top","middle","bottom"];var oe=ne({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Qe.includes(e)}},setup(e,{slots:o}){const m=y(()=>e.align!==void 0?{verticalAlign:e.align}:null),c=y(()=>{const f=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(f!==void 0?` text-${f}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>x("div",{class:c.value,style:m.value,role:"alert","aria-label":e.label},je(o.default,e.label!==void 0?[e.label]:[]))}}),q=ne({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const m=y(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>x("tr",{class:m.value},le(o.default))}}),h=ne({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const m=ke(),c=y(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return x("td",{class:c.value},le(o.default));const f=m.vnode.key,p=(e.props.colsMap!==void 0?e.props.colsMap[f]:null)||e.props.col;if(p===void 0)return;const{row:r}=e.props;return x("td",{class:c.value+p.__tdClass(r),style:p.__tdStyle(r)},le(o.default))}}});const Oe=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Deployed",align:"right",field:e=>e[254],format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0}],Be=[{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],ze=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:e=>e[17],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.accepted.length,format:e=>`${e}`},{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0}],Me=[{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0}],Ue=U({name:"Open Table",components:{},setup(){const e=ee(),{activeProject:o,openRequestsForProject:m,openRequestsForProjectSummary:c}=L(V()),f=m,p=y(()=>e.screen.lt.md?100:5);return console.log(f.value),{columns:Oe,rows:f,initialPagination:{rowsPerPage:p},separator:"vertical",secondColumns:ze,mobileColumns:Be,secMobileColumns:Me,activeProject:o,openRequestsForProjectSummary:c}}}),Le={class:"q-px-none"},Je={class:"row text-caption"},De={class:"col-12 col-md-2"},Ie=t("span",{class:"text-accent"},"Total Requests:",-1),He={class:"text-white q-ml-sm"},We={class:"col-12 col-md-2"},Xe=t("span",{class:"text-accent"},"Classifications:",-1),Ze={class:"text-white q-ml-sm"},Ge={class:"col-12 col-md-2"},Ke=t("span",{class:"text-accent"},"Total Need:",-1),Ye={class:"text-white q-ml-sm"},xe={class:"col-12 col-md-2"},et=t("span",{class:"text-accent"},"Balance:",-1),tt={class:"text-white q-ml-sm"},at={class:"col-12 col-md-2"},st=t("span",{class:"text-accent"},"Avg. Rate:",-1),ot={class:"text-white q-ml-sm"},lt={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function rt(e,o,m,c,f,p){return d(),b("div",Le,[a(X,{class:"q-mb-md bg-dark"},{default:s(()=>[a(te,{class:"q-pa-sm"},{default:s(()=>[t("div",Je,[t("div",De,[t("div",null,[Ie,t("span",He,n(e.openRequestsForProjectSummary.requestCount),1)])]),t("div",We,[t("div",null,[Xe,t("span",Ze,n(e.openRequestsForProjectSummary.classCount),1)])]),t("div",Ge,[t("div",null,[Ke,t("span",Ye,n(e.openRequestsForProjectSummary.need),1)])]),t("div",xe,[t("div",null,[et,t("span",tt,n(e.openRequestsForProjectSummary.balance),1)])]),t("div",at,[t("div",null,[st,t("span",ot,"$ "+n(e.openRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),a(T,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Open Requests for ${e.activeProject[20]}`:"Open Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no open requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.md},{header:s(r=>[a(q,{class:"bg-dark text-white",props:r},{default:s(()=>[a(_,{"auto-width":""}),(d(!0),b(j,null,k(r.cols,l=>(d(),g(_,{key:l.name,props:r},{default:s(()=>[v(n(l.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":s(({message:r})=>[t("div",lt,[a(Z,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(r),1)])]),body:s(r=>[a(q,{props:r},{default:s(()=>[a(h,{"auto-width":""},{default:s(()=>[a(w,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:l=>r.expand=!r.expand,icon:r.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(d(!0),b(j,null,k(r.cols,l=>(d(),g(h,{key:l.name,props:r},{default:s(()=>[v(n(l.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),z(a(q,{props:r},{default:s(()=>[a(h,{colspan:"100%"},{default:s(()=>[a(T,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:r.row.classes,"row-key":"3","table-header-class":"bg-secondary"},null,8,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[M,r.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var nt=J(Ue,[["render",rt]]);const it=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],dt=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],ut=[{name:1,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],mt=[{name:1,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],ct=U({name:"Closed Table",components:{},setup(){const e=ee(),{activeProject:o,closedRequestsForProject:m,closedRequestsForProjectSummary:c}=L(V()),f=m,p=y(()=>e.screen.lt.md?100:5);return{columns:it,rows:f,initialPagination:{rowsPerPage:p},separator:"vertical",secondColumns:ut,mobileColumns:dt,secMobileColumns:mt,activeProject:o,closedRequestsForProjectSummary:c}}}),ft={class:"q-px-none"},bt={class:"row text-caption"},pt={class:"col-12 col-md-2"},gt=t("span",{class:"text-accent"},"Requests:",-1),ht={class:"text-white q-ml-sm"},$t={class:"col-12 col-md-2"},qt=t("span",{class:"text-accent"},"Classifications:",-1),vt={class:"text-white q-ml-sm"},yt={class:"col-12 col-md-2"},wt=t("span",{class:"text-accent"},"Need:",-1),Ct={class:"text-white q-ml-sm"},_t={class:"col-12 col-md-2"},Nt=t("span",{class:"text-accent"},"Offers:",-1),Rt={class:"text-white q-ml-sm"},jt={class:"col-12 col-md-2"},kt=t("span",{class:"text-accent"},"Avg. Rate:",-1),Pt={class:"text-white q-ml-sm"},St={class:"col-12 col-md-2"},Vt=t("span",{class:"text-accent"},"Avg. Time Open:",-1),Ft={class:"text-white q-ml-sm"},Et={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Tt(e,o,m,c,f,p){return d(),b("div",ft,[a(X,{class:"q-mb-md bg-dark"},{default:s(()=>[a(te,{class:"q-pa-sm"},{default:s(()=>[t("div",bt,[t("div",pt,[t("div",null,[gt,t("span",ht,n(e.closedRequestsForProjectSummary.requestCount),1)])]),t("div",$t,[t("div",null,[qt,t("span",vt,n(e.closedRequestsForProjectSummary.classCount),1)])]),t("div",yt,[t("div",null,[wt,t("span",Ct,n(e.closedRequestsForProjectSummary.need),1)])]),t("div",_t,[t("div",null,[Nt,t("span",Rt,n(e.closedRequestsForProjectSummary.offers),1)])]),t("div",jt,[t("div",null,[kt,t("span",Pt,"$ "+n(e.closedRequestsForProjectSummary.avgRate),1)])]),t("div",St,[t("div",null,[Vt,t("span",Ft,n(e.closedRequestsForProjectSummary.avgDuration),1)])])])]),_:1})]),_:1}),a(T,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Completed Requests for ${e.activeProject[20]}`:"Completed Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no completed requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:s(r=>[a(q,{class:"bg-dark text-white",props:r},{default:s(()=>[a(_,{"auto-width":""}),(d(!0),b(j,null,k(r.cols,l=>(d(),g(_,{key:l.name,props:r},{default:s(()=>[v(n(l.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":s(({message:r})=>[t("div",Et,[a(Z,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(r),1)])]),body:s(r=>[a(q,{props:r},{default:s(()=>[a(h,{"auto-width":""},{default:s(()=>[a(w,{size:"sm",color:"primary",round:"",dense:"",onClick:l=>r.expand=!r.expand,icon:r.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024),(d(!0),b(j,null,k(r.cols,l=>(d(),g(h,{key:l.name,props:r},{default:s(()=>[v(n(l.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),z(a(q,{props:r},{default:s(()=>[a(h,{colspan:"100%"},{default:s(()=>[t("div",null,[a(T,{dense:"",title:"Classifications","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:r.row.classes,"row-key":"3","table-header-class":"bg-secondary"},null,8,["columns","rows"])])]),_:2},1024)]),_:2},1032,["props"]),[[M,r.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var At=J(ct,[["render",Tt]]);const Qt=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`}],Ot=[{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],Bt=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Quantity",align:"right",field:e=>e[18],format:e=>`${e}`}],zt=[{name:3,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Qty",align:"right",field:e=>e[18],format:e=>`${e}`}],Mt=[{name:0,label:"Name",align:"left",field:e=>e[6],format:(e,o)=>`${e} ${o[7]}`,sortable:!0,required:!0},{name:1,label:"Phone",align:"right",field:e=>e[8],format:e=>`${e}`,sortable:!0},{name:2,label:"Status",align:"right",field:e=>e[16],format:e=>`${e}`}],Ut=U({name:"Open Table",components:{},setup(){const e=ee(),{submitCancelRequest:o,submitCancelClassification:m}=V(),{activeProject:c,pendingRequestsForProject:f,pendingRequestsForProjectSummary:p}=L(V()),r=f,l=y(()=>e.screen.lt.md?100:5);function $(i){e.dialog({title:"Confirm",message:"Are you sure you want to cancel this request?",cancel:!0,persistent:!0}).onOk(async()=>{try{await o({request:i}),e.notify({type:"positive",message:"Request Canceled!",position:"top-right"})}catch(u){e.notify({type:"negative",message:u,position:"top-right"})}})}function F(i){e.dialog({title:"Confirm",message:"Are you sure you want to cancel this classification?",cancel:!0,persistent:!0}).onOk(async()=>{try{await m({item:i}),e.notify({type:"positive",message:"Classification Removed!",position:"top-right"})}catch(u){e.notify({type:"negative",message:u,position:"top-right"})}})}return{columns:Qt,rows:r,initialPagination:{rowsPerPage:l},separator:"vertical",secondColumns:Bt,mobileColumns:Ot,secMobileColumns:zt,nameColumns:Mt,activeProject:c,pendingRequestsForProjectSummary:p,cancelRequest:$,cancelClassification:F}}}),Lt={class:"q-px-none"},Jt={class:"row text-caption"},Dt={class:"col-12 col-md-2"},It=t("span",{class:"text-accent"},"Total Requests:",-1),Ht={class:"text-white q-ml-sm"},Wt={class:"col-12 col-md-2"},Xt=t("span",{class:"text-accent"},"Classifications:",-1),Zt={class:"text-white q-ml-sm"},Gt={class:"col-12 col-md-2"},Kt=t("span",{class:"text-accent"},"Total Need:",-1),Yt={class:"text-white q-ml-sm"},xt={class:"col-12 col-md-2"},ea=t("span",{class:"text-accent"},"Balance:",-1),ta={class:"text-white q-ml-sm"},aa={class:"col-12 col-md-2"},sa=t("span",{class:"text-accent"},"Avg. Rate:",-1),oa={class:"text-white q-ml-sm"},la={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function ra(e,o,m,c,f,p){return d(),b("div",Lt,[a(X,{class:"q-mb-md bg-dark"},{default:s(()=>[a(te,{class:"q-pa-sm"},{default:s(()=>[t("div",Jt,[t("div",Dt,[t("div",null,[It,t("span",Ht,n(e.pendingRequestsForProjectSummary.requestCount),1)])]),t("div",Wt,[t("div",null,[Xt,t("span",Zt,n(e.pendingRequestsForProjectSummary.classCount),1)])]),t("div",Gt,[t("div",null,[Kt,t("span",Yt,n(e.pendingRequestsForProjectSummary.need),1)])]),t("div",xt,[t("div",null,[ea,t("span",ta,n(e.pendingRequestsForProjectSummary.balance),1)])]),t("div",aa,[t("div",null,[sa,t("span",oa,"$ "+n(e.pendingRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),a(T,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Pending Requests for ${e.activeProject[20]}`:"Pending Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no pending requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:s(r=>[a(q,{class:"bg-dark text-white",props:r},{default:s(()=>[a(_,{"auto-width":""}),(d(!0),b(j,null,k(r.cols,l=>(d(),g(_,{key:l.name,props:r},{default:s(()=>[v(n(l.label),1)]),_:2},1032,["props"]))),128)),a(_,{"auto-width":""})]),_:2},1032,["props"])]),"no-data":s(({message:r})=>[t("div",la,[a(Z,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(r),1)])]),body:s(r=>[a(q,{props:r},{default:s(()=>[a(h,{"auto-width":""},{default:s(()=>[a(w,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:l=>r.expand=!r.expand,icon:r.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(d(!0),b(j,null,k(r.cols,l=>(d(),g(h,{key:l.name,props:r},{default:s(()=>[v(n(l.value),1)]),_:2},1032,["props"]))),128)),a(h,{"auto-width":""},{default:s(()=>[a(w,{size:"sm",color:"primary",onClick:l=>e.cancelRequest(r.row),label:"Cancel"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"]),z(a(q,{props:r},{default:s(()=>[a(h,{colspan:"100%"},{default:s(()=>[a(T,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:r.row.classes,"row-key":"3","table-header-class":"bg-secondary"},{header:s(l=>[a(q,{class:"bg-dark text-white",props:l},{default:s(()=>[a(_,{"auto-width":""}),(d(!0),b(j,null,k(l.cols,$=>(d(),g(_,{key:$.name,props:l},{default:s(()=>[v(n($.label),1)]),_:2},1032,["props"]))),128)),a(_,{"auto-width":""})]),_:2},1032,["props"])]),body:s(l=>[a(q,{props:l},{default:s(()=>[a(h,{"auto-width":""},{default:s(()=>[l.row.names.length>0&&e.$can("read","nameRequests")?(d(),g(w,{key:0,size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:$=>l.expand=!l.expand,icon:l.expand?"remove":"add"},null,8,["size","onClick","icon"])):R("",!0)]),_:2},1024),(d(!0),b(j,null,k(l.cols,$=>(d(),g(h,{key:$.name,props:l},{default:s(()=>[v(n($.value),1)]),_:2},1032,["props"]))),128)),a(h,{"auto-width":""},{default:s(()=>[a(w,{size:"sm",color:"primary",onClick:$=>e.cancelClassification(l.row),label:"remove"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"]),z(a(q,{props:l},{default:s(()=>[a(h,{colspan:"100%"},{default:s(()=>[a(T,{dense:"","hide-pagination":!0,columns:e.nameColumns,rows:l.row.names,"row-key":"3","table-header-class":"bg-accent"},null,8,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[M,l.expand]])]),_:2},1032,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[M,r.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var na=J(Ut,[["render",ra]]);const ia=U({components:{PhoneNumberInput:Pe},setup(){const{addedClassifications:e,addedNames:o}=L(V()),{pushName:m}=V(),c=G(10),f=G(null),p=y(()=>{const C=new RegExp("^[0-9]{"+c.value+"}","g");return S({job:S().required("Classification is required"),firstName:Y().required().label("First Name"),lastName:Y().required().label("Last Name"),phoneNumber:Y().matches(C,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone"),ssn:Y().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).required().label("Last 4 of SSN")})}),{meta:r,errors:l,handleSubmit:$,handleReset:F}=ie({validationSchema:p}),{value:i}=N("job"),{value:u}=N("firstName"),{value:D}=N("lastName"),{value:I}=N("phoneNumber"),{value:H}=N("ssn"),W=$(async C=>{console.log(C);const K={classification:C.job,id:o.value.length+1,firstName:C.firstName,lastName:C.lastName,phone:C.phoneNumber,ssn:C.ssn};console.log(K),m(K),F()}),P=C=>{f.value=C},Q=C=>{c.value=C};return console.log(e.value),{job:i,firstName:u,lastName:D,phoneNumber:I,ssn:H,formMeta:r,formErrors:l,submit:W,addedClassifications:e,updateCountry:P,updatePhoneMaxLength:Q}}}),da=t("div",{class:"row justify-between q-mb-sm"},[t("div",{class:"col-12 col-md-6"},[t("div",{class:"text-dark text-body1"},"Add Names")])],-1),ua={class:"row items-center"},ma={class:"col-12 col-md-6 q-px-sm"},ca={class:"text-caption"},fa={class:"text-caption"},ba={class:"col-12 col-md-6 q-px-sm"},pa={class:"text-caption"},ga={class:"row items-center q-mt-sm"},ha={class:"col-12 col-md-5 q-px-sm"},$a={class:"text-caption"},qa={class:"q-mt-md",align:"right"};function va(e,o,m,c,f,p){const r=O("phone-number-input");return d(),b("div",{class:re(e.$q.screen.lt.md?"q-pt-md":"")},[da,a(ue,{onSubmit:de(e.submit,["prevent"])},{default:s(()=>[t("div",ua,[t("div",ma,[a(B,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":o[0]||(o[0]=l=>e.firstName=l),error:!!e.formErrors.firstName,"bottom-slots":""},{error:s(()=>[t("div",ca,n(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"]),a(B,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":o[1]||(o[1]=l=>e.lastName=l),error:!!e.formErrors.lastName,"bottom-slots":""},{error:s(()=>[t("div",fa,n(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])]),t("div",ba,[a(r,{name:"phoneNumber",class:"col-xs-12 col-sm-12",modelValue:e.phoneNumber,"onUpdate:modelValue":o[2]||(o[2]=l=>e.phoneNumber=l),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.formErrors.phoneNumber,"error-message":e.formErrors.phoneNumber,onCountryChanged:e.updateCountry,dense:""},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"]),a(B,{maxlength:"4",dense:"",label:"Last 4 of SSN",modelValue:e.ssn,"onUpdate:modelValue":o[3]||(o[3]=l=>e.ssn=l),error:!!e.formErrors.ssn,"bottom-slots":""},{error:s(()=>[t("div",pa,n(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])])]),t("div",ga,[t("div",ha,[a(A,{dense:"",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":o[4]||(o[4]=l=>e.job=l),options:e.addedClassifications,"option-label":"label","display-value":`${e.job?e.job.label:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:s(()=>[t("div",$a,n(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])])]),t("div",qa,[a(w,{class:"q-mr-sm",size:"sm",color:"secondary",label:"Back",onClick:o[5]||(o[5]=l=>e.$emit("closeNames"))}),a(w,{type:"submit",size:"sm",color:"primary",label:"Save"})])]),_:1},8,["onSubmit"])],2)}var ya=J(ia,[["render",va]]);const wa=U({components:{AddNames:ya},setup(){const{requestOptions:e,addedClassifications:o}=L(V()),{pushClassification:m}=V(),c=G(!1),f=y(()=>e.value.crafts),p=y(()=>u.value&&u.value!==void 0?u.value.classifications:[]),r=S({craft:S().required("Craft is required.").nullable(),job:S().required("Classification is required.").nullable(),rate:me().required("Rate is required.").nullable(),qty:me().required("Craft is required.").nullable()}),{meta:l,errors:$,handleSubmit:F,handleReset:i}=ie({validationSchema:r}),{value:u}=N("craft"),{value:D}=N("job"),{value:I}=N("rate"),{value:H}=N("qty"),W=F(async P=>{console.log(P);const Q={id:o.value.length+1,craft:P.craft,job:P.job,rate:P.rate,qty:P.qty,label:P.job[18],names:[]};console.log(Q),m(Q),i()});return{crafts:f,jobs:p,craft:u,job:D,rate:I,qty:H,formMeta:l,formErrors:$,submit:W,showAddNames:c,addedClassifications:o}}}),Ca={class:"row justify-between q-mb-sm"},_a=t("div",{class:"col-12 col-md-6"},[t("div",{class:"text-dark text-body1"},"Add Classifications")],-1),Na={key:0,align:"right",class:"col-12 col-md-6"},Ra={class:"row items-center"},ja={class:"col-12 col-md-3 q-px-sm"},ka={class:"text-caption"},Pa={class:"col-12 col-md-4 q-px-sm"},Sa={class:"text-caption"},Va={class:"col-12 col-md-2 q-px-sm"},Fa={key:0},Ea={key:1,class:"text-negative"},Ta={class:"text-caption"},Aa={class:"col-12 col-md-2 q-px-sm"},Qa={class:"text-caption"},Oa={key:1};function Ba(e,o,m,c,f,p){const r=O("add-names");return d(),b("div",null,[e.showAddNames?R("",!0):(d(),b("div",{key:0,class:re(e.$q.screen.lt.md?"q-pt-md":"")},[t("div",Ca,[_a,e.addedClassifications.length>0&&e.$can("create","nameRequests")?(d(),b("div",Na,[a(w,{dense:"",color:"info",label:"Add Names",icon:"add",onClick:o[0]||(o[0]=l=>e.showAddNames=!0)})])):R("",!0)]),a(ue,{onSubmit:de(e.submit,["prevent"])},{default:s(()=>[t("div",Ra,[t("div",ja,[a(A,{dense:"",label:"Select a Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craft,"onUpdate:modelValue":o[1]||(o[1]=l=>e.craft=l),options:e.crafts,"option-label":"10","display-value":`${e.craft?e.craft[10]:""}`,"bottom-slots":"",error:!!e.formErrors.craft},{error:s(()=>[t("div",ka,n(e.formErrors.craft),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",Pa,[a(A,{dense:"",label:"Select a Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":o[2]||(o[2]=l=>e.job=l),options:e.jobs,"option-label":"18","display-value":`${e.job?e.job[18]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:s(()=>[t("div",Sa,n(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",Va,[a(B,{dense:"",type:"number",modelValue:e.rate,"onUpdate:modelValue":o[3]||(o[3]=l=>e.rate=l),"bottom-slots":"",error:!!e.formErrors.rate,prefix:"$","label-slot":""},{label:s(()=>[!e.rate||e.job.avgRate&&e.rate<=e.job.avgRate?(d(),b("span",Fa,"Rate")):R("",!0),e.rate&&e.job&&e.rate>e.job.avgRate?(d(),b("span",Ea,"Avg rate $ "+n(e.job.avgRate.toFixed(2)),1)):R("",!0)]),error:s(()=>[t("div",Ta,n(e.formErrors.rate),1)]),_:1},8,["modelValue","error"])]),t("div",Aa,[a(B,{dense:"",type:"number",label:"Qty",modelValue:e.qty,"onUpdate:modelValue":o[4]||(o[4]=l=>e.qty=l),"bottom-slots":"",error:!!e.formErrors.qty},{error:s(()=>[t("div",Qa,n(e.formErrors.qty),1)]),_:1},8,["modelValue","error"])]),t("div",{class:re(["col-12 col-md-1",e.$q.screen.lt.md?"text-right":"q-px-sm"])},[a(w,{type:"submit",size:"sm",color:"primary",round:e.$q.screen.gt.sm,icon:"add",label:e.$q.screen.gt.sm?"":"Add Classification"},null,8,["round","label"])],2)])]),_:1},8,["onSubmit"])],2)),e.showAddNames?(d(),b("div",Oa,[a(r,{onCloseNames:o[5]||(o[5]=l=>e.showAddNames=!1)})])):R("",!0)])}var za=J(wa,[["render",Ba]]);const Ma=[{name:1,label:"Craft",align:"left",field:e=>e.craft[10],format:e=>`${e}`,sortable:!0},{name:2,label:"Classification",align:"left",field:e=>e.job[18],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Rate",align:"left",field:e=>e.rate,format:e=>`${e}`,sortable:!0},{name:4,label:"Qty",align:"left",field:e=>e.qty,format:e=>`${e}`,sortable:!0,required:!0}],Ua=[{name:1,label:"Name",align:"left",field:e=>e.firstName,format:(e,o)=>`${e} ${o.lastName}`,sortable:!0},{name:2,label:"Phone",align:"left",field:e=>e.phone,format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Last 4",align:"left",field:e=>e.ssn,format:e=>`${e}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.classification.job[18],format:e=>`${e}`,sortable:!0,required:!0}],La=U({name:"Requests",components:{openTable:nt,closedTable:At,pendingTable:na,addClassifications:za},setup(){const e=ee(),{requestOptions:o,getClassifications:m,openRequestsForProject:c,pendingRequestsForProject:f,closedRequestsForProject:p}=L(V()),{storeRequest:r,resetRequest:l,spliceClassification:$,spliceName:F}=V(),i=G(0),u=G(!1);Se(m,()=>{console.log(m.value)});const D=S({jobNumber:S().required("Job number is required."),contact:S().required().nullable("Contact is required."),location:S().required().nullable("Location is required."),perdiem:S().nullable(),dateNeeded:Ve().required().nullable("Date needed is required.")}),{meta:I,errors:H,handleSubmit:W,handleReset:P}=ie({validationSchema:D}),{value:Q}=N("jobNumber"),{value:C}=N("contact"),{value:K}=N("location"),{value:be}=N("perdiem"),{value:pe}=N("dateNeeded"),ge=W(async E=>{console.log(E),r({request:E}),P(),i.value=1,u.value=!1,e.notify({type:"positive",message:"Request submitted!"})}),he=y(()=>{const E=[];return m.value.forEach(Ne=>{Ne.names.forEach(Re=>{E.push(Re)})}),E}),$e=y(()=>o.value.jobNumbers),qe=y(()=>o.value.perdiem.length>0?o.value.perdiem:null),ve=y(()=>o.value.locations),ye=y(()=>o.value.contacts);function we(){e.dialog({title:"Confirm",message:"Are you sure you want to cancel? All of your progress will be lost.",cancel:!0,persistent:!0}).onOk(()=>{l(),u.value=!1,P()})}function Ce(E){e.dialog({title:"Confirm",message:"Are you sure you want to delete this classification?",cancel:!0,persistent:!0}).onOk(()=>{$({item:E})})}function _e(E){e.dialog({title:"Confirm",message:"Are you sure you want to delete this name?",cancel:!0,persistent:!0}).onOk(()=>{F({item:E})})}return{tab:i,showNew:u,getClassifications:m,columns:Ma,nameColumns:Ua,jobNumbers:$e,perdiems:qe,locations:ve,contacts:ye,submitRequest:ge,jobNumber:Q,contact:C,location:K,perdiem:be,dateNeeded:pe,formMeta:I,formErrors:H,removeClassification:Ce,cancelNew:we,openRequestsForProject:c,pendingRequestsForProject:f,closedRequestsForProject:p,removeName:_e,names:he}}}),Ja={class:"q-px-md"},Da={class:"row justify-between"},Ia={class:"col-12 col-md-5 q-pr-lg"},Ha={class:"text-caption"},Wa={class:"text-caption"},Xa={class:"text-caption"},Za={class:"text-caption"},Ga={class:"text-caption"},Ka={class:"col-12 col-md-7"},Ya={class:"q-mt-md"},xa={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},es={key:1,class:"q-mt-md"},ts={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function as(e,o,m,c,f,p){const r=O("open-table"),l=O("pending-table"),$=O("closed-table"),F=O("add-classifications");return d(),g(Ee,{style:{"max-width":"100vw"}},{default:s(()=>[t("div",Ja,[a(fe,{duration:100},{default:s(()=>[z(t("div",null,[a(X,{flat:"",class:"q-mb-sm q-mt-none q-pt-none"},{default:s(()=>[a(ce,{align:"right"},{default:s(()=>[e.showNew?R("",!0):(d(),g(w,{key:0,dense:e.$q.screen.lt.md,color:"primary",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:o[0]||(o[0]=i=>e.showNew=!0)},null,8,["dense","label"]))]),_:1})]),_:1}),a(Te,{modelValue:e.tab,"onUpdate:modelValue":o[1]||(o[1]=i=>e.tab=i),"bg-color":"none",color:"dark","active-color":"primary","indicator-color":"accent",align:"justify"},{default:s(()=>[a(ae,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},{default:s(()=>[e.openRequestsForProject.length>0?(d(),g(oe,{key:0,color:"accent",floating:"",transparent:""},{default:s(()=>[v(n(e.openRequestsForProject.length),1)]),_:1})):R("",!0)]),_:1},8,["label"]),a(ae,{name:1,label:e.$q.screen.gt.xs?"Pending Requests":"Pending"},{default:s(()=>[e.pendingRequestsForProject.length>0?(d(),g(oe,{key:0,color:"accent",floating:"",transparent:""},{default:s(()=>[v(n(e.pendingRequestsForProject.length),1)]),_:1})):R("",!0)]),_:1},8,["label"]),a(ae,{name:2,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},{default:s(()=>[e.closedRequestsForProject.length>0?(d(),g(oe,{key:0,color:"accent",floating:"",transparent:""},{default:s(()=>[v(n(e.closedRequestsForProject.length),1)]),_:1})):R("",!0)]),_:1},8,["label"])]),_:1},8,["modelValue"]),a(Ae,{modelValue:e.tab,"onUpdate:modelValue":o[2]||(o[2]=i=>e.tab=i),animated:""},{default:s(()=>[a(se,{name:0},{default:s(()=>[a(r)]),_:1}),a(se,{name:1},{default:s(()=>[a(l)]),_:1}),a(se,{name:2},{default:s(()=>[a($)]),_:1})]),_:1},8,["modelValue"])],512),[[M,!e.showNew]])]),_:1}),a(fe,{duration:100},{default:s(()=>[z(t("div",null,[a(X,null,{default:s(()=>[a(ue,{onSubmit:de(e.submitRequest,["prevent"])},{default:s(()=>[a(te,null,{default:s(()=>[t("div",Da,[t("div",Ia,[a(A,{class:"q-mb-sm",dense:"",label:"Select Job Number","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.jobNumber,"onUpdate:modelValue":o[3]||(o[3]=i=>e.jobNumber=i),options:e.jobNumbers,"option-label":"11","display-value":`${e.jobNumber?e.jobNumber[11]:""}`,"bottom-slots":"",error:!!e.formErrors.jobNumber},{error:s(()=>[t("div",Ha,n(e.formErrors.jobNumber),1)]),_:1},8,["modelValue","options","display-value","error"]),a(A,{class:"q-mb-sm",dense:"",label:"Select Contact","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.contact,"onUpdate:modelValue":o[4]||(o[4]=i=>e.contact=i),options:e.contacts,"option-label":"17","display-value":`${e.contact?e.contact[17]:""}`,"bottom-slots":"",error:!!e.formErrors.contact},{error:s(()=>[t("div",Wa,n(e.formErrors.contact),1)]),_:1},8,["modelValue","options","display-value","error"]),a(A,{class:"q-mb-sm",dense:"",label:"Select Meeting Location","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.location,"onUpdate:modelValue":o[5]||(o[5]=i=>e.location=i),options:e.locations,"option-label":"6","display-value":`${e.location?e.location[6]:""}`,"bottom-slots":"",error:!!e.formErrors.location},{error:s(()=>[t("div",Xa,n(e.formErrors.location),1)]),_:1},8,["modelValue","options","display-value","error"]),a(A,{class:"q-mb-sm",dense:"",label:"Per Diem","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.perdiem,"onUpdate:modelValue":o[6]||(o[6]=i=>e.perdiem=i),options:e.perdiems,"option-label":"20","display-value":`${e.perdiem?e.perdiem[20]:""}`,"bottom-slots":"",error:!!e.formErrors.perdiem},{error:s(()=>[t("div",Za,n(e.formErrors.perdiem),1)]),_:1},8,["modelValue","options","display-value","error"]),a(B,{dense:"",type:"date",modelValue:e.dateNeeded,"onUpdate:modelValue":o[7]||(o[7]=i=>e.dateNeeded=i),"bottom-slots":"",error:!!e.formErrors.dateNeeded,label:"Date Needed","stack-label":""},{error:s(()=>[t("div",Ga,n(e.formErrors.dateNeeded),1)]),_:1},8,["modelValue","error"])]),t("div",Ka,[e.$q.screen.lt.md?(d(),g(Fe,{key:0,color:"primary"})):R("",!0),a(F),t("div",Ya,[a(T,{dense:"",rows:e.getClassifications,"row-key":"id",columns:e.columns,"table-header-class":"bg-secondary","no-data-label":"At least one classification is required."},{"no-data":s(({message:i})=>[t("div",xa,[a(Z,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(i),1)])]),header:s(i=>[a(q,{class:"bg-dark text-white",props:i},{default:s(()=>[(d(!0),b(j,null,k(i.cols,u=>(d(),g(_,{key:u.name,props:i},{default:s(()=>[v(n(u.label),1)]),_:2},1032,["props"]))),128)),a(_,{"auto-width":""})]),_:2},1032,["props"])]),body:s(i=>[a(q,{props:i},{default:s(()=>[(d(!0),b(j,null,k(i.cols,u=>(d(),g(h,{key:u.name,props:i},{default:s(()=>[v(n(u.value),1)]),_:2},1032,["props"]))),128)),a(h,{"auto-width":""},{default:s(()=>[a(w,{size:"xs",round:"",color:"primary",onClick:u=>e.removeClassification(i.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),e.names.length>0&&e.$can("read","nameRequests")?(d(),b("div",es,[a(T,{dense:"",rows:e.names,"row-key":"id",columns:e.nameColumns,"table-header-class":"bg-secondary","no-data-label":"No names added."},{"no-data":s(({message:i})=>[t("div",ts,[a(Z,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(i),1)])]),header:s(i=>[a(q,{class:"bg-dark text-white",props:i},{default:s(()=>[(d(!0),b(j,null,k(i.cols,u=>(d(),g(_,{key:u.name,props:i},{default:s(()=>[v(n(u.label),1)]),_:2},1032,["props"]))),128)),a(_,{"auto-width":""})]),_:2},1032,["props"])]),body:s(i=>[a(q,{props:i},{default:s(()=>[(d(!0),b(j,null,k(i.cols,u=>(d(),g(h,{key:u.name,props:i},{default:s(()=>[v(n(u.value),1)]),_:2},1032,["props"]))),128)),a(h,{"auto-width":""},{default:s(()=>[a(w,{size:"xs",round:"",color:"primary",onClick:u=>e.removeName(i.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])):R("",!0)])])]),_:1}),a(ce,{align:"right"},{default:s(()=>[a(w,{color:"dark",label:"Cancel",onClick:e.cancelNew},null,8,["onClick"]),a(w,{disabled:!e.getClassifications.length>0,color:"primary",label:"Submit",type:"submit"},null,8,["disabled"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})],512),[[M,e.showNew]])]),_:1})])]),_:1})}var rs=J(La,[["render",as]]);export{rs as default};
