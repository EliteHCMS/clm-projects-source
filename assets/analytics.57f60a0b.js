import{l as m,_ as y,aS as h,p as $,t as v,d as u,bb as _,bR as b,bQ as g,bJ as w,cy as q,c as E,cC as d,v as f,ag as C,bZ as M}from"./index.86392f86.js";function l(t,s=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(!(s instanceof Element))throw new TypeError("Expected a DOM element");return getComputedStyle(s).getPropertyValue(`--q-${t}`).trim()||null}const j=m({props:{title:String,data:Array},setup(t){const s={title:{text:t.title,align:"left"},stroke:{curve:"smooth"},dataLabels:{enabled:!0},colors:[l("primary"),l("accent"),l("info"),l("secondary")]};return{getCssVar:l,options:s,props:t}}});function R(t,s,c,i,p,n){const r=h("apexchart");return $(),v("div",null,[u(g,null,{default:_(()=>[u(b,null,{default:_(()=>[u(r,{height:"500",type:"line",options:t.options,series:t.props.data},null,8,["options","series"])]),_:1})]),_:1})])}var S=y(j,[["render",R]]);const A=m({components:{ApexLine:S},setup(){const{openRequestsForProject:t,closedRequestsForProject:s}=w(q()),c=E(()=>{const p=t.value.concat(s.value).filter(e=>d(e[1].$y).isSame(d().year())),n=[];p.forEach(e=>{e.classes.forEach(a=>{const o={x:d(e[1].$d).format("MMM"),y:a.need,43:a[43],69:a[69],sort:d(e[1].$d).format("M"),date:e[1].$d};n.push(o)})});const r=[...new Map(n.map(e=>[e[69],{label:e[43],value:e[69]}])).values()];return r.forEach(e=>{Object.assign(e,{name:e.label,data:[...new Map(n.filter(a=>a[69]===e.value).map(a=>[a.x,{x:a.x,y:n.filter(o=>o[69]===e.value).filter(o=>o.x===a.x).reduce((o,x)=>o+x.y,0),sort:parseInt(a.sort),date:a.date}])).values()].sort((a,o)=>a.sort>o.sort?1:-1)})}),r});return console.log(c.value),{requestData:c}}}),D={class:"row justify-between"},T={class:"col-6"};function k(t,s,c,i,p,n){const r=h("apex-line");return $(),v("div",null,[f("div",null,[f("div",D,[f("div",T,[u(r,{title:"Monthly Request Totals (YTD)",data:t.requestData},null,8,["data"])])])])])}var B=y(A,[["render",k]]);const P=m({name:"Analytics",components:{Dash:B},setup(){return{}}});function Q(t,s,c,i,p,n){const r=h("dash");return $(),C(M,{padding:"",style:{"max-width":"100vw"}},{default:_(()=>[u(r)]),_:1})}var F=y(P,[["render",Q]]);export{F as default};
