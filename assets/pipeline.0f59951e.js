import{l as C,bD as j,bX as P,bE as $,bR as y,c as b,bC as M,_ as q,bW as g,p as x,t as N,v as t,d as l,bb as i,a4 as r,bP as Q,b_ as T,y as k,bK as D,bN as A,bJ as B,aO as I,aM as J,aS as O,ag as F,c2 as E}from"./index.505b8fa2.js";import{Q as R}from"./QTable.5ee6cbce.js";import{e as V}from"./export-file.819425c9.js";import"./QMarkupTable.b64074ff.js";const h=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],z=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],H=C({name:"Pipeline Table",components:{},setup(){const e=j(),d=P(),p=$(),{pipelineForProject:f}=y(d),s=f,{active:u}=y($()),m=b(()=>s.value.filter(o=>o.map.status==="In Process")),Y=b(()=>s.value.filter(o=>o.map.status==="Deployed")),w=b(()=>s.value.filter(o=>o.status==="Arrived")),S=b(()=>e.screen.lt.md?100:s.value.length>=25?Math.round(s.value.length/5):10);function v(o,_,n){let a=_!==void 0?_(o,n):o;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}return console.log(s.value),{columns:h,mobileColumns:z,rows:s,initialPagination:{rowsPerPage:S},separator:"vertical",projectStore:p,pipelineForProject:f,inProcess:m,deployed:Y,arrived:w,active:u,exportPipeline(){const o=[h.map(n=>v(n.label))].concat(s.value.map(n=>h.map(a=>v(typeof a.field=="function"?a.field(n):n[a.field===void 0?a.name:a.field],a.format,n)).join(","))).join(`\r
`);V(`${M().format("MM.DD.YYYY")} ${u.value[20]} Project-Pipeline-Export.csv`,o,"text/csv")!==!0&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}}),c=e=>(I("data-v-59ffa3b2"),e=e(),J(),e),K={class:"q-px-sm"},W={class:"row"},X={class:"col-12 col-md-10 q-px-xs"},G={class:"text-dark text-caption text-italic"},L={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},U=c(()=>t("div",{class:"text-body1 text-primary"},"Summary",-1)),Z={class:"text-body2"},ee=c(()=>t("span",{class:"q-mr-md"},"In Process:",-1)),te={class:"text-body2"},ae=c(()=>t("span",{class:"q-mr-md"},"Deployed:",-1)),se={class:"text-body2"},oe=c(()=>t("span",{class:"q-mr-md"},"Arrived:",-1)),le={class:"text-body2"},ne=c(()=>t("span",{class:"q-mr-md"},"Total:",-1));function re(e,d,p,f,s,u){return x(),N("div",K,[t("div",W,[t("div",X,[l(R,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Pipeline":`Staffing Pipeline for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There is no one in the pipeline for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":i(()=>[t("div",G,"(Total: "+r(e.pipelineForProject.length)+" in pipeline)",1),l(Q,{dense:e.$q.screen.lt.md,class:"q-ml-sm",color:"primary",label:"Download",onClick:e.exportPipeline,disable:e.pipelineForProject.length<1},null,8,["dense","onClick","disable"])]),"no-data":i(({message:m})=>[t("div",L,[l(T,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,r(m),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),t("div",{class:k(e.$q.screen.lt.md?"col-12 q-px-xs q-mt-sm order-first":"col-2 q-px-xs")},[l(B,null,{default:i(()=>[l(D,{class:"q-pb-xs"},{default:i(()=>[U]),_:1}),l(D,{class:"text-right q-pt-xs"},{default:i(()=>[t("div",Z,[ee,t("span",null,r(e.inProcess.length),1)]),t("div",te,[ae,t("span",null,r(e.deployed.length),1)]),t("div",se,[oe,t("span",null,r(e.arrived.length),1)]),l(A,{color:"primary",class:"q-my-sm"}),t("div",le,[ne,t("span",null,r(e.pipelineForProject.length),1)])]),_:1})]),_:1})],2)])])}var ie=q(H,[["render",re],["__scopeId","data-v-59ffa3b2"]]);const de={name:"Pipeline",components:{pipelineTable:ie},setup(){const{getInProcesses:e,getDispatches:d,getDeployments:p}=P();return e(),d(),p(),{}}};function pe(e,d,p,f,s,u){const m=O("pipeline-table");return x(),F(E,{style:{"max-width":"100vw"}},{default:i(()=>[l(m)]),_:1})}var be=q(de,[["render",pe]]);export{be as default};
