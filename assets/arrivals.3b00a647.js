import{l as S,D as q,E as p,G as b,H as N,r as g,I as P,J as Q,c as v,_ as y,K as D,p as V,t as I,d as l,L as o,Q as k,M as Y,x as _,N as M,O as $,v as h,P as U,R as B,S as E,U as T,V as j}from"./index.2b12213f.js";import{Q as x}from"./QTable.4a686818.js";const R=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:2,label:"Workday ID",align:"left",field:e=>e.map.workdayId,format:(e,r)=>r[20]==="In Process"?"W---------":e,sortable:!0},{name:3,label:"Craft",align:"left",field:e=>e.map.craft,format:e=>`${e}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.job,format:e=>`${e}`,sortable:!0},{name:5,label:"Job Number",align:"left",field:e=>e.map.jobNumber,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:e=>e.map.contact,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:7,label:"Start Date",align:"left",field:e=>e.map.start,format:e=>`${D.formatDate(new Date(e),"MM/DD/YYYY")}`,sortable:!0}],J=[{name:1,label:"Name",align:"left",field:e=>e,format:e=>`${e.map.name} (ID: ${e[20]==="In Process"?"W---------":e.map.workdayId})`,sortable:!0},{name:3,label:"Job",align:"left",field:e=>e.map,format:e=>`${e.craft} ${e.job}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:e=>e.map.contact,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:7,label:"Start Date",align:"left",field:e=>e.map.start,format:e=>`${D.formatDate(new Date(e),"MM/DD/YYYY")}`,sortable:!0}],L=S({name:"Arrivals Table",components:{},setup(){const e=q(),{deploymentsForProject:r,alreadyArrived:n}=p(b()),u=r,{getDeployments:c,updateArrival:f}=b(),{active:a}=p(N()),s=g("");c();const i=g([]);P(()=>{n.value.forEach(t=>{i.value.includes(t)||i.value.push(t)})}),Q(()=>{n.value.forEach(t=>{i.value.includes(t)||i.value.push(t)})});const d=v(()=>{const t=[];return u.value.forEach(m=>{m[31].toLowerCase().includes(s.value.toLowerCase())&&t.push(m)}),t}),A=v(()=>d.value&&d.value!==void 0?e.screen.lt.md?100:d.value.length>=25?Math.round(d.value.length/5):5:5);function C({rows:t,added:m,evt:K}){f({row:t[0],added:m})}return{columns:R,mobileColumns:J,rows:d,initialPagination:{rowsPerPage:A},separator:"vertical",arrivals:i,updateArrivals:C,active:a,alreadyArrived:n,search:s}}}),W={class:"q-px-sm"},z={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function H(e,r,n,u,c,f){return V(),I("div",W,[l(M,{flat:""},{default:o(()=>[l(k,{class:"q-pt-none"},{default:o(()=>[l(Y,{style:_(e.$q.screen.gt.sm?"max-width: 50%":"min-width: 100%"),modelValue:e.search,"onUpdate:modelValue":r[0]||(r[0]=a=>e.search=a),label:"Search"},null,8,["style","modelValue"])]),_:1})]),_:1}),l(x,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Expected Arrivals for ${e.active[20]}`:"Arrivals",columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical",selection:"multiple",onSelection:e.updateArrivals,selected:e.alreadyArrived,"table-header-class":"bg-dark text-white","no-data-label":`There are no expected arrivals for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"header-selection":o(a=>[l($,{disable:"",modelValue:a.selected,"onUpdate:modelValue":s=>a.selected=s},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":o(a=>[l($,{label:e.$q.screen.lt.sm?"Arrived":"",modelValue:a.selected,"onUpdate:modelValue":s=>a.selected=s},null,8,["label","modelValue","onUpdate:modelValue"])]),"no-data":o(({message:a})=>[h("div",z,[l(U,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),h("span",null,B(a),1)])]),_:1},8,["title-class","title","columns","rows","pagination","onSelection","selected","no-data-label","grid"])])}var w=y(L,[["render",H]]);const F={name:"Arrivals",components:{arrivalTable:w},setup(){return{arrivalTable:w}}};function G(e,r,n,u,c,f){const a=E("arrival-table");return V(),T(j,{style:{"max-width":"100vw"}},{default:o(()=>[l(a)]),_:1})}var Z=y(F,[["render",G]]);export{Z as default};
