var qe=Object.defineProperty,je=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var ge=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ye=(e,t)=>{for(var n in t||(t={}))Re.call(t,n)&&ge(e,n,t[n]);if(he)for(var n of he(t))ke.call(t,n)&&ge(e,n,t[n]);return e},$e=(e,t)=>je(e,Ce(t));import{bB as Ne,bC as Se,bD as Ae,r as C,c as R,bE as Je,w as te,aB as Ue,h as ee,bF as be,bG as Ee,bH as Te,g as Pe,l as B,bI as ue,bJ as I,bK as M,bL as Qe,bM as pe,bN as S,q as U,_ as X,p as i,t as p,v as o,d as a,bb as r,bO as ae,bP as K,a4 as h,bQ as F,bR as H,bS as Me,bT as le,bU as j,by as oe,bV as se,bW as re,aS as _,ag as A,F as z,aR as D,ah as ne,bX as Oe,bY as ze,bZ as De,b_ as G,y as L,b$ as Le,al as Fe,c0 as Ie,c1 as _e}from"./index.71a5d202.js";import{Q as ie,a as fe,b as de,c as ce}from"./QTabPanels.9edfe193.js";import{Q as we,a as Be}from"./QTable.643a65dc.js";import{Q as Xe}from"./QSpace.84f67d5f.js";var Ye=Ne({name:"QSplitter",props:$e(ye({},Se),{modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]}),emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:{$q:$}}=Pe(),m=Ae(e,$),b=C(null),d={before:C(null),after:C(null)},l=R(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(m.value===!0?" q-splitter--dark":"")),s=R(()=>e.horizontal===!0?"height":"width"),N=R(()=>e.reverse!==!0?"before":"after"),q=R(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function J(y){return(e.unit==="%"?y:Math.round(y))+e.unit}const E=R(()=>({[N.value]:{[s.value]:J(e.modelValue)}}));let T,w,V,g,k;function Q(y){if(y.isFirst===!0){const f=b.value.getBoundingClientRect()[s.value];T=e.horizontal===!0?"up":"left",w=e.unit==="%"?100:f,V=Math.min(w,q.value[1],Math.max(q.value[0],e.modelValue)),g=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:$.lang.rtl===!0?-1:1)*(e.unit==="%"?f===0?0:100/f:1),b.value.classList.add("q-splitter--active");return}if(y.isFinal===!0){k!==e.modelValue&&n("update:modelValue",k),b.value.classList.remove("q-splitter--active");return}const u=V+g*(y.direction===T?-1:1)*y.distance[e.horizontal===!0?"y":"x"];k=Math.min(w,q.value[1],Math.max(q.value[0],u)),d[N.value].value.style[s.value]=J(k),e.emitImmediately===!0&&e.modelValue!==k&&n("update:modelValue",k)}const Y=R(()=>[[Je,Q,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function O(y,u){y<u[0]?n("update:modelValue",u[0]):y>u[1]&&n("update:modelValue",u[1])}return te(()=>e.modelValue,y=>{O(y,q.value)}),te(()=>e.limits,()=>{Ue(()=>{O(e.modelValue,q.value)})}),()=>{const y=[ee("div",{ref:d.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:E.value.before},be(t.before)),ee("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Ee("div",{class:"q-splitter__separator-area absolute-full"},be(t.separator),"sep",e.disable!==!0,()=>Y.value)]),ee("div",{ref:d.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:E.value.after},be(t.after))];return ee("div",{class:l.value,ref:b},Te(t.default,y))}}});const We=B({props:{job:Object,craft:Object},setup(e,t){const n=ue(),{udpateProjectCrafts:$}=I(),m=R(()=>e.craft.options.jobs.find(V=>V[3]===e.job[13]).aliases),b=R(()=>M({alias:M().required().label("Custom Job Title"),fixedRate:Qe().moreThan(7.25,"Fixed rate must be greater than minimum wage.").lessThan(1e3).label("Fixed Rate").nullable()})),{meta:d,errors:l,handleSubmit:s,handleReset:N}=pe({validationSchema:b,initialValues:{alias:{3:e.job[9],7:e.job[18]},fixedRate:e.job.fixedRate>0?e.job.fixedRate:null}}),{value:q}=S("alias"),{value:J}=S("fixedRate"),E=s(async w=>{console.log(w),n.loading.show();const V={3:{value:e.job[3]},20:{value:e.craft[3]}};q.value!=={3:e.job[9],7:e.job[18]}&&Object.assign(V,{9:{value:w.alias[3]}}),J.value!==e.job.fixedRate&&Object.assign(V,{155:{value:w.fixedRate}});try{const{data:g}=await U.upsertRecordsXML({to:"bpzpx5m7x",data:[V],fieldsToReturn:[153],formatObject:153});g.length>0&&($({craft:g[0][153]}),N(),n.loading.hide(),n.notify({type:"positive",message:"New job added!"}),t.emit("closeEditJob"))}catch{n.notify({type:"negative",message:"Something went wrong"})}});async function T(w,V){n.dialog({title:"Confirm",message:`Confirm you want to add "${w}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:g}=await U.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:e.job[13]},7:{value:w},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(g),g.length>0&&(q.value=g[0][25],V(g[0][25]))}catch{n.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{V()})}return{formMeta:d,formErrors:l,submit:E,alias:q,fixedRate:J,aliasOptions:m,submitAlias:T}}}),Ge={class:"text-body1 text-white"},He={class:"text-caption"},Ke={class:"text-caption"};function Ze(e,t,n,$,m,b){return i(),p("div",null,[o("div",null,[a(se,{onSubmit:oe(e.submit,["prevent"])},{default:r(()=>[a(ae,null,{default:r(()=>[a(K,{class:"bg-dark"},{default:r(()=>[o("div",Ge,"Edit "+h(e.craft[10])+" "+h(e.job[18]),1)]),_:1}),a(K,null,{default:r(()=>[a(F,{class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[0]||(t[0]=d=>e.alias=d),options:e.aliasOptions,"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:r(()=>[o("div",He,h(e.formErrors.alias),1)]),_:1},8,["modelValue","options","display-value","error","onNewValue"]),a(H,{step:"any",prefix:"$",type:"number",dense:"",label:"Fixed Rate",modelValue:e.fixedRate,"onUpdate:modelValue":t[1]||(t[1]=d=>e.fixedRate=d),error:!!e.formErrors.fixedRate,"bottom-slots":""},{error:r(()=>[o("div",Ke,h(e.formErrors.fixedRate),1)]),_:1},8,["modelValue","error"])]),_:1}),a(Me),a(le,{class:"bg-accent",align:"right"},{default:r(()=>[a(j,{size:e.$q.screen.lt.md?"sm":"",color:"secondary",label:"Cancel",onClick:t[2]||(t[2]=d=>e.$emit("closeEditJob"))},null,8,["size"]),a(j,{type:"submit",size:e.$q.screen.lt.md?"sm":"",color:"primary",label:"Save"},null,8,["size"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}var xe=X(We,[["render",Ze]]);const et=[{name:0,label:"Job Title",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Avg. Rate",align:"right",field:e=>e.avgRate,format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:3,label:"Times Requested",align:"right",field:e=>e.timesRequested,format:e=>`${e}`,sortable:!0},{name:4,label:"Quantity Requested",align:"right",field:e=>e.qtyRequested,format:e=>`${e}`,sortable:!0}],tt=B({components:{EditJobDialog:xe},setup(){const e=ue(),{projectCrafts:t,active:n}=re(I()),{udpateProjectCrafts:$}=I(),m=C(t.value[0][3]),b=C(!1),d=C(!1),l=C(null),s=C(null);te(n,(u,f)=>{m.value=u.crafts.sort((v,me)=>v.order>me.order?1:-1)[0][3]});const N=R(()=>{const u=t.value.find(f=>f[3]===m.value).classifications;return u!==void 0?u.sort((f,v)=>f.order>v.order||f.order===v.order&&f.fixedRate>v.fixedRate?-1:1):[]}),q=M({job:M().required("Job is required."),alias:M().required("Alias is required.").nullable()}),{meta:J,errors:E,handleSubmit:T,handleReset:w}=pe({validationSchema:q}),{value:V}=S("job"),{value:g}=S("alias"),k=T(async u=>{const f=t.value.find(v=>v[9]===u.job[13]);if(f===void 0)e.notify({type:"negative",message:"Something went wrong"});else try{const{data:v}=await U.upsertRecordsXML({to:"bpzpx5m7x",data:[{9:{value:u.alias[3]},13:{value:u.job[3]},20:{value:f[3]}}],fieldsToReturn:[153],formatObject:153});v.length>0&&($({craft:v[0][153]}),w(),b.value=!1,e.notify({type:"positive",message:"New job added!"}))}catch{e.notify({type:"negative",message:"Something went wrong"})}});async function Q(u,f){e.dialog({title:"Confirm",message:`Confirm you want to add "${u}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:v}=await U.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:V.value[3]},7:{value:u},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(v),v.length>0&&(g.value=v[0][25],f(v[0][25]))}catch{e.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{f()})}function Y(){b.value=!1,w()}function O({craft:u,job:f}){l.value=u,s.value=f,d.value=!0,console.log(u),console.log(f)}function y(){l.value=null,s.value=null,d.value=!1}return{projectCrafts:t,tab:m,columns:et,initialPagination:{rowsPerPage:100},splitValue:C(20),showAddJob:b,showEditJob:d,formMeta:J,formErrors:E,job:V,alias:g,submitJob:k,submitAlias:Q,cancelAddJob:Y,editJob:O,rows:N,editJobCraft:l,editJobJob:s,closeEditJob:y}}}),at={key:0},lt={key:0,class:"q-mb-sm"},ot=o("thead",{class:"bg-dark text-white"},[o("tr",null,[o("th",{class:"text-left"},"Job Title"),o("th",{class:"text-right"},"Fixed Rate"),o("th",{class:"text-right"},"Times Requested"),o("th",{class:"text-right"},"Qty Requested"),o("th")])],-1),st={class:"text-left"},rt={class:"text-right"},nt={class:"text-right"},it={class:"text-right"},dt={class:"text-right"},ut={key:1},mt={class:"row justify-between"},bt={class:"col-5"},ft={class:"text-caption"},ct={class:"col-6"},pt={class:"text-caption"},vt={key:1},ht={key:0},gt={class:"q-mb-sm"},yt=o("thead",{class:"bg-dark text-white"},[o("tr",null,[o("th",{class:"text-left"},"Job Title"),o("th",{class:"text-right"},"Fixed Rate"),o("th",{class:"text-right"},"Avg. Rate"),o("th",{class:"text-right"},"Times Requested"),o("th",{class:"text-right"},"Quantity"),o("th")])],-1),$t={class:"text-left"},wt={class:"text-right"},Vt={class:"text-right"},qt={class:"text-right"},jt={class:"text-right"},Ct={class:"text-right"},Rt={key:1},kt={class:"text-caption"},Nt={class:"text-caption"};function St(e,t,n,$,m,b){const d=_("edit-job-dialog");return i(),p("div",null,[e.$q.screen.gt.sm?(i(),A(Ye,{key:0,modelValue:e.splitValue,"onUpdate:modelValue":t[5]||(t[5]=l=>e.splitValue=l)},{before:r(()=>[a(fe,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=l=>e.tab=l),vertical:e.$q.screen.gt.md,align:"left","indicator-color":"accent","active-bg-color":"dark","active-color":"white"},{default:r(()=>[(i(!0),p(z,null,D(e.projectCrafts,l=>(i(),A(ie,{key:l[3],name:l[3],label:l[10]},null,8,["name","label"]))),128))]),_:1},8,["modelValue","vertical"])]),after:r(()=>[a(ce,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=l=>e.tab=l),animated:"",vertical:e.$q.screen.gt.md},{default:r(()=>[(i(!0),p(z,null,D(e.projectCrafts,l=>(i(),A(de,{key:l[3],name:l[3],class:"q-pt-none"},{default:r(()=>[e.showAddJob?(i(),p("div",ut,[a(se,{onSubmit:oe(e.submitJob,["prevent"])},{default:r(()=>[a(ae,{flat:""},{default:r(()=>[a(K,null,{default:r(()=>[o("div",mt,[o("div",bt,[a(F,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[2]||(t[2]=s=>e.job=s),options:l.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:r(()=>[o("div",ft,h(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"])]),o("div",ct,[a(F,{disable:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[3]||(t[3]=s=>e.alias=s),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:r(()=>[o("div",pt,h(e.formErrors.alias),1)]),_:1},8,["disable","modelValue","options","display-value","error","onNewValue"])])])]),_:2},1024),a(le,{align:"right"},{default:r(()=>[a(j,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),a(j,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(i(),p("div",at,[e.$can("create","jobs")?(i(),p("div",lt,[a(j,{color:"primary",label:"Add Another Job",onClick:t[1]||(t[1]=s=>e.showAddJob=!0)})])):ne("",!0),a(we,null,{default:r(()=>[ot,o("tbody",null,[(i(!0),p(z,null,D(e.rows,s=>(i(),p("tr",{key:s[3]},[o("td",st,h(s[18]),1),o("td",rt,h(s.fixedRate>0?`$ ${s.fixedRate.toFixed(2)}`:"Edit to Add"),1),o("td",nt,h(s.timesRequested),1),o("td",it,h(s.qtyRequested),1),o("td",dt,[e.$can("manage","jobs")?(i(),A(j,{key:0,size:"sm",label:"edit",color:"primary",onClick:N=>e.editJob({craft:l,job:s})},null,8,["onClick"])):ne("",!0)])]))),128))])]),_:2},1024)]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","vertical"])]),_:1},8,["modelValue"])):(i(),p("div",vt,[a(fe,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=l=>e.tab=l),align:"left",class:"shadow-2","indicator-color":"accent"},{default:r(()=>[(i(!0),p(z,null,D(e.projectCrafts,l=>(i(),A(ie,{key:l[3],name:l[3],label:l.abbr},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),a(ce,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=l=>e.tab=l),animated:""},{default:r(()=>[(i(!0),p(z,null,D(e.projectCrafts,l=>(i(),A(de,{key:l[3],name:l[3]},{default:r(()=>[e.showAddJob?(i(),p("div",Rt,[a(se,{onSubmit:oe(e.submitJob,["prevent"])},{default:r(()=>[a(ae,{flat:""},{default:r(()=>[a(K,null,{default:r(()=>[a(F,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[8]||(t[8]=s=>e.job=s),options:l.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:r(()=>[o("div",kt,h(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"]),a(F,{disabled:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[9]||(t[9]=s=>e.alias=s),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:r(()=>[o("div",Nt,h(e.formErrors.alias),1)]),_:1},8,["disabled","modelValue","options","display-value","error","onNewValue"])]),_:2},1024),a(le,{align:"right"},{default:r(()=>[a(j,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),a(j,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(i(),p("div",ht,[o("div",gt,[a(j,{color:"primary",label:"Add Another Job",onClick:t[7]||(t[7]=s=>e.showAddJob=!0)})]),a(we,null,{default:r(()=>[yt,o("tbody",null,[(i(!0),p(z,null,D(e.rows,s=>(i(),p("tr",{key:s[3]},[o("td",$t,h(s[18]),1),o("td",wt,h(s.fixedRate>0?`$ ${s.fixedRate.toFixed(2)}`:"N/A"),1),o("td",Vt,"$ "+h(s.avgRate.toFixed(2)),1),o("td",qt,h(s.timesRequested),1),o("td",jt,h(s.qtyRequested),1),o("td",Ct,[a(j,{size:"sm",label:"edit",color:"primary",onClick:N=>e.editJob(s)},null,8,["onClick"])])]))),128))])]),_:1})]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])),a(Oe,{modelValue:e.showEditJob,"onUpdate:modelValue":t[11]||(t[11]=l=>e.showEditJob=l),persistent:""},{default:r(()=>[a(d,{craft:e.editJobCraft,job:e.editJobJob,onCloseEditJob:e.closeEditJob},null,8,["craft","job","onCloseEditJob"])]),_:1},8,["modelValue"])])}var At=X(tt,[["render",St]]);const Jt=B({components:{phoneNumberInput:ze},setup(e,t){const n=ue(),$=C(10),m=C(null),{active:b}=re(I()),{userPermissions:d,getUser:l}=re(De()),{addUser:s}=I(),N=R(()=>{const c=d.value.find(P=>P[7]==="create"&&P[16]==="users");return c!==void 0?c.roles:[]}),q=R(()=>{const c=new RegExp("^[0-9]{"+$.value+"}","g");return M({firstName:G().required().label("First Name"),lastName:G().required().label("Last Name"),email:G().email().required().label("Email"),phoneNumber:G().matches(c,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),role:M().required().nullable().label("Role"),workdayId:G().required().label("Workday ID")})}),{meta:J,errors:E,handleSubmit:T,handleReset:w}=pe({validationSchema:q}),{value:V}=S("firstName"),{value:g}=S("lastName"),{value:k}=S("email"),{value:Q}=S("phoneNumber"),{value:Y}=S("role"),{value:O}=S("workdayId"),y=T(async c=>{console.log(c);const P={userType:"Project User",phoneNumber:`+${m.value?m.value.dialCode:"1"}${c.phoneNumber}`,email:c.email};if(b.value.users.filter(W=>W[6]===P.email||W[8]===P.phoneNumber).length>0)n.dialog({title:"Alert",message:"Your project already has a user with that phone or email."}).onOk(()=>{t.emit("userAdded")});else{const W=await U.checkIfUserExist(P);if(W){const{data:Z}=await U.upsertRecordsXML({to:"br598isx6",data:[{6:{value:W[3]},7:{value:"Project"},9:{value:b.value[3]}}],fieldsToReturn:[28],formatObject:28});Z.length>0&&(s({user:Z[0][28]}),n.notify({type:"positive",message:"User successfully added"}),t.emit("userAdded"))}else{const Z=k.value.match(/^([^@]*)@/)[1],Ve=Object.assign({phoneNumber:Q.value},m.value),{data:ve}=await U.upsertRecordsXML({to:"br4pxrbs6",data:[{6:{value:c.email},7:{value:"temp"},8:{value:`+${m.value?m.value.dialCode:"1"}${c.phoneNumber}`},9:{value:JSON.stringify(Ve)},10:{value:"Active"},11:{value:c.role[3]},17:{value:!0},23:{value:l.value[3]},24:{value:l.value[3]},25:{value:new Date},26:{value:new Date},32:{value:"Project User"},33:{value:Z},35:{value:V.value},37:{value:g.value},49:{value:!0},50:{value:!0},70:{value:c.workdayId}}],fieldsToReturn:[3,96],formatObject:96});if(ve[0]!==void 0){const x=await U.upsertRecordsXML({to:"br598isx6",data:[{6:{value:ve[0][3]},7:{value:"Project"},9:{value:b.value[3]}}],fieldsToReturn:[28],formatObject:28});x.data[0]!==void 0&&(s({user:x.data[0][28]}),console.log(x.data[0][28]),n.dialog({title:"Confirm",message:"User successfully added. Would you like to send them an invite?",cancel:!0,persistent:!0}).onOk(async()=>{(await U.upsertRecordsXML({to:"br4pxrbs6",data:[{3:{value:x.data[0][28][3]},93:{value:new Date}}],fieldsToReturn:[3]})).data[0]!==void 0&&(n.notify({type:"positive",message:"User successfully added"}),n.notify({type:"positive",message:"User invite submitted"}),t.emit("userAdded"))}).onCancel(()=>{n.notify({type:"positive",message:"User successfully added"}),t.emit("userAdded")}))}}}w()}),u=R(()=>{const c=[];return b.value.users.forEach(P=>{c.push(P[9].phoneNumber)}),c});te(Q,c=>{u.value.includes(c)&&n.notify({type:"negative",message:"Phone Number is already in use!",timeout:1e4,position:n.screen.lt.md?"top":"center"})});const f=c=>{m.value=c},v=c=>{$.value=c};function me(){w(),t.emit("userCanceled")}return console.log(d.value,u.value),{updateCountry:f,updatePhoneMaxLength:v,firstName:V,lastName:g,email:k,phoneNumber:Q,role:Y,workdayId:O,formMeta:J,formErrors:E,submitUser:y,active:b,roleOptions:N,cancel:me}}}),Ut=o("div",{class:"text-primary text-h6 q-mb-sm"},"Add a New User",-1),Et={class:"row justify-between"},Tt={class:"row justify-between"},Pt={class:"text-caption"},Qt={class:"text-caption"};function Mt(e,t,n,$,m,b){const d=_("phone-number-input");return i(),p("div",null,[a(ae,null,{default:r(()=>[a(se,{onSubmit:oe(e.submitUser,["prevent"])},{default:r(()=>[a(K,null,{default:r(()=>[Ut,o("div",Et,[o("div",{class:L(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(H,{dense:"",outlined:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=l=>e.firstName=l),error:!!e.formErrors.firstName},null,8,["modelValue","error"])],2),o("div",{class:L(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(H,{dense:"",outlined:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=l=>e.lastName=l),error:!!e.formErrors.lastName},null,8,["modelValue","error"])],2),o("div",{class:L(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(H,{dense:"",outlined:"",label:"Workday ID",modelValue:e.workdayId,"onUpdate:modelValue":t[2]||(t[2]=l=>e.workdayId=l),error:!!e.formErrors.workdayId},null,8,["modelValue","error"])],2)]),o("div",Tt,[o("div",{class:L(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(d,{name:"phoneNumber",class:"col-xs-12 col-sm-12",outlined:"",modelValue:e.phoneNumber,"onUpdate:modelValue":t[3]||(t[3]=l=>e.phoneNumber=l),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.formErrors.phoneNumber,"error-message":e.formErrors.phoneNumber,onCountryChanged:e.updateCountry,dense:""},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"])],2),o("div",{class:L(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(H,{dense:"",outlined:"",label:"Email","bottom-slots":"",modelValue:e.email,"onUpdate:modelValue":t[4]||(t[4]=l=>e.email=l),error:!!e.formErrors.email},{error:r(()=>[o("div",Pt,h(e.formErrors.email),1)]),_:1},8,["modelValue","error"])],2),o("div",{class:L(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(F,{dense:"",outlined:"",label:"Role","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.role,"onUpdate:modelValue":t[5]||(t[5]=l=>e.role=l),options:e.roleOptions,"option-label":"6","display-value":`${e.role?e.role[6]:""}`,"bottom-slots":"",error:!!e.formErrors.role},{error:r(()=>[o("div",Qt,h(e.formErrors.role),1)]),_:1},8,["modelValue","options","display-value","error"])],2)])]),_:1}),a(le,{align:"right"},{default:r(()=>[a(j,{color:"secondary",onClick:e.cancel,label:"Cancel"},null,8,["onClick"]),a(j,{color:"primary",type:"submit",label:"Submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])}var Ot=X(Jt,[["render",Mt]]);const zt=[{name:0,label:"Date Created",align:"left",field:e=>e[1],format:e=>`${Le.formatDate(e.$d,"MM/DD/YYYY")}`,sortable:!0},{name:1,label:"Name",align:"left",field:e=>e[35],format:(e,t)=>`${e} ${t[37]}`,sortable:!0},{name:2,label:"Role",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:3,label:"Email",align:"left",field:e=>e[6],format:e=>`${e}`,sortable:!0},{name:4,label:"Last Access",align:"left",field:e=>e.lastLogin,format:(e,t)=>`${t.registered?e.date:"Never"}`,sortable:!0}],Dt=B({components:{CreateUser:Ot},setup(){const{usersForProject:e}=re(I()),t=C(!1);function n(){t.value=!1}function $(m){console.log(m)}return{usersForProject:e,columns:zt,initialPagination:{rowsPerPage:100},showAddUser:t,userAdded:n,sendInvite:$}}}),Lt={key:1};function Ft(e,t,n,$,m,b){const d=_("create-user");return i(),p("div",null,[e.showAddUser?(i(),p("div",Lt,[a(d,{onUserAdded:e.userAdded,onUserCanceled:t[1]||(t[1]=l=>e.showAddUser=!1)},null,8,["onUserAdded"])])):(i(),A(Be,{key:0,rows:e.usersForProject.sort((l,s)=>l[44]>s[44]?-1:1),columns:e.columns,"hide-pagination":!0,"row-key":"name",pagination:e.initialPagination,"table-header-class":"bg-dark text-white"},Fe({_:2},[e.$can("create","users")?{name:"top",fn:r(()=>[a(j,{color:"primary",label:"Add Another User",onClick:t[0]||(t[0]=l=>e.showAddUser=!0)}),a(Xe)])}:void 0]),1032,["rows","columns","pagination"]))])}var It=X(Dt,[["render",Ft]]);const _t=B({name:"Projects",components:{JobsTab:At,UsersTab:It},setup(){return ue(),{tab:C(0)}}}),Bt={class:"q-px-sm"};function Xt(e,t,n,$,m,b){const d=_("jobs-tab"),l=_("users-tab");return i(),p("div",Bt,[a(Ie,{class:"bg-info text-white shadow-2 rounded-borders"},{default:r(()=>[a(fe,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=s=>e.tab=s),"bg-color":"none","indicator-color":"accent",align:"justify",dense:""},{default:r(()=>[a(ie,{name:0,label:e.$q.screen.gt.xs?"Available Jobs":"Jobs"},null,8,["label"]),e.$can("read","users")?(i(),A(ie,{key:0,name:1,label:"Users"})):ne("",!0)]),_:1},8,["modelValue"])]),_:1}),a(ce,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=s=>e.tab=s),animated:""},{default:r(()=>[a(de,{class:"q-px-xs",name:0},{default:r(()=>[a(d)]),_:1}),e.$can("read","users")?(i(),A(de,{key:0,class:"q-px-xs",name:1},{default:r(()=>[a(l)]),_:1})):ne("",!0)]),_:1},8,["modelValue"])])}var Yt=X(_t,[["render",Xt]]);const Wt=B({name:"PageIndex",components:{ProjectTabs:Yt},setup(){return{}}});function Gt(e,t,n,$,m,b){const d=_("project-tabs");return i(),A(_e,{style:{"max-width":"100vw"}},{default:r(()=>[a(d)]),_:1})}var la=X(Wt,[["render",Gt]]);export{la as default};
