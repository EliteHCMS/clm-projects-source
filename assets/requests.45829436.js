import{l as X,bI as te,bW as G,cC as O,c as Q,_ as L,p as r,t as u,d as s,bb as a,bP as Y,v as t,a4 as i,bO as K,F as _,aR as V,ag as f,an as S,c7 as ee,bU as h,bd as H,bw as Z,ah as p,y as U,r as J,bK as z,b_ as I,bM as oe,bN as C,bR as M,bQ as B,by as le,bV as ne,bL as ue,w as fe,aS as D,cD as Oe,bS as pe,bT as ie,cA as Qe,cE as ze,c0 as Ue,cF as ce,bX as Me,c1 as Le}from"./index.71a5d202.js";import{Q as R,a as y,b as re}from"./QTd.5f62e175.js";import{a as De,Q as se,c as Be,b as ae}from"./QTabPanels.9edfe193.js";import{Q as Je}from"./QSpace.84f67d5f.js";import{Q as Ie}from"./QTooltip.ef3de3a5.js";import{b as P,a as W,Q as de}from"./QTable.643a65dc.js";const Ye=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Deployed",align:"right",field:e=>e[254],format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0}],Ke=[{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],We=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:e=>e[17],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.accepted.length,format:e=>`${e}`},{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0}],Xe=[{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0}],Ge=[{name:0,label:"Name",align:"left",field:e=>e[6],format:(e,l)=>`${e} ${l[7]}`,sortable:!0,required:!0},{name:1,label:"Phone",align:"right",field:e=>e[8],format:e=>`${e}`,sortable:!0},{name:2,label:"Status",align:"right",field:e=>e[10],format:e=>`${e}`}],He=X({name:"Open Table",components:{},setup(e,l){const c=te(),{activeProject:g,openRequestsForProject:$,openRequestsForProjectSummary:q}=G(O()),o=$,n=Q(()=>c.screen.lt.md?100:10);function d(k){l.emit("addSomeNames",k)}function F(k){l.emit("removeName",k)}return console.log(o.value),{columns:Ye,rows:o,initialPagination:{rowsPerPage:n},separator:"vertical",secondColumns:We,mobileColumns:Ke,secMobileColumns:Xe,activeProject:g,openRequestsForProjectSummary:q,nameColumns:Ge,addSomeNames:d,removeName:F}}}),Ze={class:"q-px-none"},xe={class:"row text-caption"},et={class:"col-12 col-md-2"},tt=t("span",{class:"text-accent"},"Total Requests:",-1),st={class:"text-white q-ml-sm"},at={class:"col-12 col-md-2"},ot=t("span",{class:"text-accent"},"Classifications:",-1),lt={class:"text-white q-ml-sm"},nt={class:"col-12 col-md-2"},rt=t("span",{class:"text-accent"},"Total Need:",-1),it={class:"text-white q-ml-sm"},dt={class:"col-12 col-md-2"},mt=t("span",{class:"text-accent"},"Balance:",-1),ut={class:"text-white q-ml-sm"},ct={class:"col-12 col-md-2"},ft=t("span",{class:"text-accent"},"Avg. Rate:",-1),pt={class:"text-white q-ml-sm"},bt={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},ht=t("thead",{class:"bg-accent"},[t("tr",null,[t("th",{class:"text-left"},"Name"),t("th",{class:"text-left"},"Phone"),t("th",{class:"text-left"},"Status")])],-1),gt={class:"text-left"},$t={key:0,class:"text-left"},qt={class:"text-left"};function yt(e,l,c,g,$,q){return r(),u("div",Ze,[s(K,{class:"q-mb-md bg-dark"},{default:a(()=>[s(Y,{class:"q-pa-sm"},{default:a(()=>[t("div",xe,[t("div",et,[t("div",null,[tt,t("span",st,i(e.openRequestsForProjectSummary.requestCount),1)])]),t("div",at,[t("div",null,[ot,t("span",lt,i(e.openRequestsForProjectSummary.classCount),1)])]),t("div",nt,[t("div",null,[rt,t("span",it,i(e.openRequestsForProjectSummary.need),1)])]),t("div",dt,[t("div",null,[mt,t("span",ut,i(e.openRequestsForProjectSummary.balance),1)])]),t("div",ct,[t("div",null,[ft,t("span",pt,"$ "+i(e.openRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),s(W,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Open Requests for ${e.activeProject[20]}`:"Open Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,"table-header-class":"bg-dark text-white","no-data-label":`There are no open requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.md},{header:a(o=>[s(R,{class:"bg-dark text-white",props:o},{default:a(()=>[s(P,{"auto-width":""}),(r(!0),u(_,null,V(o.cols,n=>(r(),f(P,{key:n.name,props:o},{default:a(()=>[S(i(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":a(({message:o})=>[t("div",bt,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(o),1)])]),body:a(o=>[s(R,{props:o},{default:a(()=>[s(y,{"auto-width":""},{default:a(()=>[s(h,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:n=>o.expand=!o.expand,icon:o.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(r(!0),u(_,null,V(o.cols,n=>(r(),f(y,{key:n.name,props:o},{default:a(()=>[S(i(n.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),H(s(R,{props:o},{default:a(()=>[s(y,{colspan:"100%"},{default:a(()=>[s(W,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:o.row.classes,"row-key":"3","table-header-class":"bg-secondary"},{header:a(n=>[s(R,{class:"bg-dark text-white",props:n},{default:a(()=>[s(P,{"auto-width":""}),(r(!0),u(_,null,V(n.cols,d=>(r(),f(P,{key:d.name,props:n},{default:a(()=>[S(i(d.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:a(n=>[s(R,{props:n},{default:a(()=>[s(y,{"auto-width":""},{default:a(()=>[n.row.names.length>0&&e.$can("read","nameRequests")?(r(),f(h,{key:0,size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:d=>n.expand=!n.expand,icon:n.expand?"remove":"add"},null,8,["size","onClick","icon"])):p("",!0)]),_:2},1024),(r(!0),u(_,null,V(n.cols,d=>(r(),f(y,{key:d.name,props:n},{default:a(()=>[S(i(d.value),1)]),_:2},1032,["props"]))),128)),s(y,{"auto-width":""},{default:a(()=>[e.$can("create","nameRequests")?(r(),f(h,{key:0,class:"q-ml-sm",size:"sm",color:"dark",onClick:d=>e.addSomeNames(n.row),label:"Add Names"},null,8,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1032,["props"]),n.row.names.length>0?H((r(),f(R,{key:0,props:n},{default:a(()=>[s(y,{colspan:"100%"},{default:a(()=>[s(de,{dense:"",flat:"",bordered:""},{default:a(()=>[ht,t("tbody",null,[(r(!0),u(_,null,V(n.row.names,d=>(r(),u("tr",{key:d[3],class:U(d.employee[0]===void 0?"":d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"bg-negative text-white":"")},[t("td",gt,i(d[6])+" "+i(d[7]),1),e.$q.screen.gt.sm?(r(),u("td",$t,i(d[8]),1)):p("",!0),t("td",qt,i(d.employee[0]===void 0?d[10]:d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"Not Eligible":d.employee[0][552]===""?d[10]:d.employee[0][552]),1)],2))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])),[[Z,n.expand]]):p("",!0)]),_:2},1032,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[Z,o.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var vt=L(He,[["render",yt]]);const wt=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:10,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],Nt=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:10,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],Ct=[{name:1,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],Rt=[{name:1,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],_t=X({name:"Closed Table",components:{},setup(){const e=te(),{activeProject:l,closedRequestsForProject:c,closedRequestsForProjectSummary:g}=G(O()),$=c,q=Q(()=>e.screen.lt.md?100:5);return{columns:wt,rows:$,initialPagination:{rowsPerPage:q},separator:"vertical",secondColumns:Ct,mobileColumns:Nt,secMobileColumns:Rt,activeProject:l,closedRequestsForProjectSummary:g}}}),kt={class:"q-px-none"},jt={class:"row text-caption"},St={class:"col-12 col-md-2"},Pt=t("span",{class:"text-accent"},"Requests:",-1),Vt={class:"text-white q-ml-sm"},Ft={class:"col-12 col-md-2"},Tt=t("span",{class:"text-accent"},"Classifications:",-1),Et={class:"text-white q-ml-sm"},At={class:"col-12 col-md-2"},Ot=t("span",{class:"text-accent"},"Need:",-1),Qt={class:"text-white q-ml-sm"},zt={class:"col-12 col-md-2"},Ut=t("span",{class:"text-accent"},"Offers:",-1),Mt={class:"text-white q-ml-sm"},Lt={class:"col-12 col-md-2"},Dt=t("span",{class:"text-accent"},"Avg. Rate:",-1),Bt={class:"text-white q-ml-sm"},Jt={class:"col-12 col-md-2"},It=t("span",{class:"text-accent"},"Avg. Time Open:",-1),Yt={class:"text-white q-ml-sm"},Kt={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Wt(e,l,c,g,$,q){return r(),u("div",kt,[s(K,{class:"q-mb-md bg-dark"},{default:a(()=>[s(Y,{class:"q-pa-sm"},{default:a(()=>[t("div",jt,[t("div",St,[t("div",null,[Pt,t("span",Vt,i(e.closedRequestsForProjectSummary.requestCount),1)])]),t("div",Ft,[t("div",null,[Tt,t("span",Et,i(e.closedRequestsForProjectSummary.classCount),1)])]),t("div",At,[t("div",null,[Ot,t("span",Qt,i(e.closedRequestsForProjectSummary.need),1)])]),t("div",zt,[t("div",null,[Ut,t("span",Mt,i(e.closedRequestsForProjectSummary.offers),1)])]),t("div",Lt,[t("div",null,[Dt,t("span",Bt,"$ "+i(e.closedRequestsForProjectSummary.avgRate),1)])]),t("div",Jt,[t("div",null,[It,t("span",Yt,i(e.closedRequestsForProjectSummary.avgDuration),1)])])])]),_:1})]),_:1}),s(W,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Completed Requests for ${e.activeProject[20]}`:"Completed Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,"table-header-class":"bg-dark text-white","no-data-label":`There are no completed requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:a(o=>[s(R,{class:"bg-dark text-white",props:o},{default:a(()=>[s(P,{"auto-width":""}),(r(!0),u(_,null,V(o.cols,n=>(r(),f(P,{key:n.name,props:o},{default:a(()=>[S(i(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":a(({message:o})=>[t("div",Kt,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(o),1)])]),body:a(o=>[s(R,{props:o},{default:a(()=>[s(y,{"auto-width":""},{default:a(()=>[s(h,{size:"sm",color:"primary",round:"",dense:"",onClick:n=>o.expand=!o.expand,icon:o.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024),(r(!0),u(_,null,V(o.cols,n=>(r(),f(y,{key:n.name,props:o},{default:a(()=>[S(i(n.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),H(s(R,{props:o},{default:a(()=>[s(y,{colspan:"100%"},{default:a(()=>[t("div",null,[s(W,{dense:"",title:"Classifications","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:o.row.classes,"row-key":"3","table-header-class":"bg-secondary"},null,8,["columns","rows"])])]),_:2},1024)]),_:2},1032,["props"]),[[Z,o.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var Xt=L(_t,[["render",Wt]]);const Gt=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`}],Ht=[{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],Zt=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Quantity",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],xt=[{name:3,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Qty",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],es=[{name:0,label:"Name",align:"left",field:e=>e[6],format:(e,l)=>`${e} ${l[7]}`,sortable:!0,required:!0},{name:1,label:"Phone",align:"right",field:e=>e[8],format:e=>`${e}`,sortable:!0},{name:2,label:"Status",align:"right",field:e=>e.employee[0][80],format:(e,l)=>`${e===""?l[10]:e}`}],ts=X({name:"Open Table",components:{},setup(e,l){const c=te(),{submitCancelRequest:g,submitCancelClassification:$}=O(),{activeProject:q,pendingRequestsForProject:o,pendingRequestsForProjectSummary:n}=G(O()),d=o,F=Q(()=>c.screen.lt.md?100:10);function k(N){c.dialog({title:"Confirm",message:"Are you sure you want to cancel this request?",cancel:!0,persistent:!0}).onOk(async()=>{try{await g({request:N}),c.notify({type:"positive",message:"Request Canceled!",position:"top-right"})}catch(v){c.notify({type:"negative",message:v,position:"top-right"})}})}function T(N){c.dialog({title:"Confirm",message:"Are you sure you want to cancel this classification?",cancel:!0,persistent:!0}).onOk(async()=>{try{await $({item:N}),c.notify({type:"positive",message:"Classification Removed!",position:"top-right"})}catch(v){c.notify({type:"negative",message:v,position:"top-right"})}})}function m(N){l.emit("addSomeNames",N)}function b(N){l.emit("removeName",N)}return console.log(o.value),{columns:Gt,rows:d,initialPagination:{rowsPerPage:F},separator:"vertical",secondColumns:Zt,mobileColumns:Ht,secMobileColumns:xt,nameColumns:es,activeProject:q,pendingRequestsForProjectSummary:n,cancelRequest:k,cancelClassification:T,addSomeNames:m,removeName:b}}}),ss={class:"q-px-none"},as={class:"row text-caption"},os={class:"col-12 col-md-2"},ls=t("span",{class:"text-accent"},"Total Requests:",-1),ns={class:"text-white q-ml-sm"},rs={class:"col-12 col-md-2"},is=t("span",{class:"text-accent"},"Classifications:",-1),ds={class:"text-white q-ml-sm"},ms={class:"col-12 col-md-2"},us=t("span",{class:"text-accent"},"Total Need:",-1),cs={class:"text-white q-ml-sm"},fs={class:"col-12 col-md-2"},ps=t("span",{class:"text-accent"},"Balance:",-1),bs={class:"text-white q-ml-sm"},hs={class:"col-12 col-md-2"},gs=t("span",{class:"text-accent"},"Avg. Rate:",-1),$s={class:"text-white q-ml-sm"},qs={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},ys={class:"bg-accent"},vs=t("th",{class:"text-left"},"Name",-1),ws=t("th",{class:"text-left"},"Phone",-1),Ns=t("th",{class:"text-left"},"Status",-1),Cs={key:0},Rs={class:"text-left"},_s={key:0,class:"text-left"},ks={class:"text-left"},js={class:"text-right"};function Ss(e,l,c,g,$,q){return r(),u("div",ss,[s(K,{class:"q-mb-md bg-dark"},{default:a(()=>[s(Y,{class:"q-pa-sm"},{default:a(()=>[t("div",as,[t("div",os,[t("div",null,[ls,t("span",ns,i(e.pendingRequestsForProjectSummary.requestCount),1)])]),t("div",rs,[t("div",null,[is,t("span",ds,i(e.pendingRequestsForProjectSummary.classCount),1)])]),t("div",ms,[t("div",null,[us,t("span",cs,i(e.pendingRequestsForProjectSummary.need),1)])]),t("div",fs,[t("div",null,[ps,t("span",bs,i(e.pendingRequestsForProjectSummary.balance),1)])]),t("div",hs,[t("div",null,[gs,t("span",$s,"$ "+i(e.pendingRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),s(W,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Pending Requests for ${e.activeProject[20]}`:"Pending Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,"table-header-class":"bg-dark text-white","no-data-label":`There are no pending requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:a(o=>[s(R,{class:"bg-dark text-white",props:o},{default:a(()=>[s(P,{"auto-width":""}),(r(!0),u(_,null,V(o.cols,n=>(r(),f(P,{key:n.name,props:o},{default:a(()=>[S(i(n.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),"no-data":a(({message:o})=>[t("div",qs,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(o),1)])]),body:a(o=>[s(R,{props:o},{default:a(()=>[s(y,{"auto-width":""},{default:a(()=>[s(h,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:n=>o.expand=!o.expand,icon:o.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(r(!0),u(_,null,V(o.cols,n=>(r(),f(y,{key:n.name,props:o},{default:a(()=>[S(i(n.value),1)]),_:2},1032,["props"]))),128)),s(y,{"auto-width":""},{default:a(()=>[s(h,{size:"sm",color:"primary",onClick:n=>e.cancelRequest(o.row),label:"Cancel"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"]),H(s(R,{props:o},{default:a(()=>[s(y,{colspan:"100%"},{default:a(()=>[s(W,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:o.row.classes,"row-key":"3","table-header-class":"bg-secondary"},{header:a(n=>[s(R,{class:"bg-dark text-white",props:n},{default:a(()=>[s(P,{"auto-width":""}),(r(!0),u(_,null,V(n.cols,d=>(r(),f(P,{key:d.name,props:n},{default:a(()=>[S(i(d.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:a(n=>[s(R,{props:n},{default:a(()=>[s(y,{"auto-width":""},{default:a(()=>[n.row.names.length>0&&e.$can("read","nameRequests")?(r(),f(h,{key:0,size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:d=>n.expand=!n.expand,icon:n.expand?"remove":"add"},null,8,["size","onClick","icon"])):p("",!0)]),_:2},1024),(r(!0),u(_,null,V(n.cols,d=>(r(),f(y,{key:d.name,props:n},{default:a(()=>[S(i(d.value),1)]),_:2},1032,["props"]))),128)),s(y,{"auto-width":""},{default:a(()=>[s(h,{size:"sm",color:"primary",onClick:d=>e.cancelClassification(n.row),label:"remove"},null,8,["onClick"]),e.$can("create","nameRequests")?(r(),f(h,{key:0,class:"q-ml-sm",size:"sm",color:"dark",onClick:d=>e.addSomeNames(n.row),label:"Add Names"},null,8,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1032,["props"]),n.row.names.length>0?H((r(),f(R,{key:0,props:n},{default:a(()=>[s(y,{colspan:"100%"},{default:a(()=>[s(de,{dense:"",flat:"",bordered:"",separator:"none"},{default:a(()=>[t("thead",ys,[t("tr",null,[vs,ws,Ns,e.$can("create","nameRequests")?(r(),u("th",Cs)):p("",!0)])]),t("tbody",null,[(r(!0),u(_,null,V(n.row.names,d=>(r(),u("tr",{key:d[3],class:U(d.employee[0]===void 0?"":d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"bg-negative text-white":"")},[t("td",Rs,i(d[6])+" "+i(d[7]),1),e.$q.screen.gt.sm?(r(),u("td",_s,i(d[8]),1)):p("",!0),t("td",ks,i(d.employee[0]===void 0?d[10]:d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"Not Eligible":d.employee[0][552]===""?d[10]:d.employee[0][552]),1),t("td",js,[e.$can("create","nameRequests")&&d[35]==="Pending"?(r(),f(h,{key:0,round:"",size:"sm",color:"accent",onClick:F=>e.removeName(d),icon:"delete"},null,8,["onClick"])):(r(),f(h,{key:1,round:"",size:"sm",color:"dark",disable:"",icon:"delete"}))])],2))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])),[[Z,n.expand]]):p("",!0)]),_:2},1032,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[Z,o.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var Ps=L(ts,[["render",Ss]]);const Vs=X({components:{},setup(){const{addedClassifications:e,addedNames:l}=G(O()),{pushName:c}=O(),g=J(10),$=J(null),q=Q(()=>{const E=new RegExp("^[0-9]{"+g.value+"}","g");return z({job:z().required("Classification is required"),firstName:I().required().label("First Name"),lastName:I().required().label("Last Name"),phoneNumber:I().matches(E,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone Number"),ssn:I().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).required().label("Last 4 of SSN")})}),{meta:o,errors:n,handleSubmit:d,handleReset:F}=oe({validationSchema:q}),{value:k}=C("job"),{value:T}=C("firstName"),{value:m}=C("lastName"),{value:b}=C("phoneNumber"),{value:N}=C("ssn"),v=d(async E=>{console.log(E);const x={classification:E.job,id:l.value.length+1,firstName:E.firstName,lastName:E.lastName,phone:E.phoneNumber,ssn:E.ssn};console.log(x),c(x),F()}),w=E=>{$.value=E},A=E=>{g.value=E};return console.log(e.value),{job:k,firstName:T,lastName:m,phoneNumber:b,ssn:N,formMeta:o,formErrors:n,submit:v,addedClassifications:e,updateCountry:w,updatePhoneMaxLength:A}}}),Fs=t("div",{class:"row justify-between q-mb-sm"},[t("div",{class:"col-12 col-md-6"},[t("div",{class:"text-dark text-body1"},"Add Names")])],-1),Ts={class:"row"},Es={class:"col-12 col-md-6 q-px-sm"},As={class:"text-caption"},Os={class:"text-caption"},Qs={class:"text-caption"},zs={class:"text-caption"},Us={class:"col-12 col-md-5 q-px-sm"},Ms={class:"text-caption"},Ls={class:"q-mt-md",align:"right"};function Ds(e,l,c,g,$,q){return r(),u("div",{class:U(e.$q.screen.lt.md?"q-pt-md":"")},[Fs,s(ne,{onSubmit:le(e.submit,["prevent"])},{default:a(()=>[t("div",Ts,[t("div",Es,[s(M,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":l[0]||(l[0]=o=>e.firstName=o),error:!!e.formErrors.firstName,"bottom-slots":""},{error:a(()=>[t("div",As,i(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"]),s(M,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":l[1]||(l[1]=o=>e.lastName=o),error:!!e.formErrors.lastName,"bottom-slots":""},{error:a(()=>[t("div",Os,i(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"]),s(M,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":l[2]||(l[2]=o=>e.phoneNumber=o),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:a(()=>[t("div",Qs,i(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"]),s(M,{maxlength:"4",dense:"",label:"Last 4 of SSN",modelValue:e.ssn,"onUpdate:modelValue":l[3]||(l[3]=o=>e.ssn=o),error:!!e.formErrors.ssn,"bottom-slots":""},{error:a(()=>[t("div",zs,i(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),t("div",Us,[s(B,{dense:"",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":l[4]||(l[4]=o=>e.job=o),options:e.addedClassifications,"option-label":"label","display-value":`${e.job?e.job.label:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:a(()=>[t("div",Ms,i(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])])]),t("div",Ls,[s(h,{class:"q-mr-sm",size:"sm",color:"secondary",label:"Back",onClick:l[5]||(l[5]=o=>e.$emit("closeNames"))}),s(h,{type:"submit",size:"sm",color:"primary",label:"Save"})])]),_:1},8,["onSubmit"])],2)}var Bs=L(Vs,[["render",Ds]]);const Js=X({components:{AddNames:Bs},props:{},setup(){const{requestOptions:e,addedClassifications:l}=G(O()),{pushClassification:c}=O(),g=J(!1),$=Q(()=>e.value.crafts),q=Q(()=>T.value&&T.value!==void 0?T.value.classifications:[]),o=z({craft:z().required("Craft is required.").nullable(),job:z().required("Classification is required.").nullable(),rate:ue().required("Rate is required.").nullable(),qty:ue().required("Craft is required.").nullable()}),{meta:n,errors:d,handleSubmit:F,handleReset:k}=oe({validationSchema:o}),{value:T}=C("craft"),{value:m}=C("job"),{value:b}=C("rate"),{value:N}=C("qty");fe(m,(w,A)=>{w!==void 0&&w.hasFixedRate&&(b.value=w.fixedRate)});const v=F(async w=>{console.log(w);const A={id:l.value.length+1,craft:w.craft,job:w.job,rate:w.rate,qty:w.qty,label:w.job[18],names:[]};console.log(A),c(A),k()});return{crafts:$,jobs:q,craft:T,job:m,rate:b,qty:N,formMeta:n,formErrors:d,submit:v,showAddNames:g,addedClassifications:l}}}),Is={class:"row justify-between q-mb-sm"},Ys=t("div",{class:"col-12 col-md-6"},[t("div",{class:"text-dark text-body1"},"Add Classifications")],-1),Ks={key:0,align:"right",class:"col-12 col-md-6"},Ws={class:"row items-center"},Xs={class:"col-12 col-md-3 q-px-sm"},Gs={class:"text-caption"},Hs={class:"col-12 col-md-4 q-px-sm"},Zs={class:"text-caption"},xs={class:"col-12 col-md-2 q-px-sm"},ea=t("span",null,"Rate",-1),ta={class:"text-caption"},sa={class:"col-12 col-md-2 q-px-sm"},aa={class:"text-caption"},oa={key:1};function la(e,l,c,g,$,q){const o=D("add-names");return r(),u("div",null,[e.showAddNames?p("",!0):(r(),u("div",{key:0,class:U(e.$q.screen.lt.md?"q-pt-md":"")},[t("div",Is,[Ys,e.addedClassifications.length>0&&e.$can("create","nameRequests")?(r(),u("div",Ks,[s(h,{dense:"",color:"info",label:"Add Names",icon:"add",onClick:l[0]||(l[0]=n=>e.showAddNames=!0)})])):p("",!0)]),s(ne,{onSubmit:le(e.submit,["prevent"])},{default:a(()=>[t("div",Ws,[t("div",Xs,[s(B,{dense:"",label:"Select a Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craft,"onUpdate:modelValue":l[1]||(l[1]=n=>e.craft=n),options:e.crafts,"option-label":"10","display-value":`${e.craft?e.craft[10]:""}`,"bottom-slots":"",error:!!e.formErrors.craft},{error:a(()=>[t("div",Gs,i(e.formErrors.craft),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",Hs,[s(B,{dense:"",label:"Select a Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":l[2]||(l[2]=n=>e.job=n),options:e.jobs,"option-label":"18","display-value":`${e.job?e.job[18]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:a(()=>[t("div",Zs,i(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",xs,[s(M,{step:"any",dense:"",type:"number",modelValue:e.rate,"onUpdate:modelValue":l[3]||(l[3]=n=>e.rate=n),"bottom-slots":"",error:!!e.formErrors.rate,prefix:"$","label-slot":"",disable:e.job!==void 0&&e.job.hasFixedRate&&!e.$can("manage","rates")},{label:a(()=>[ea]),error:a(()=>[t("div",ta,i(e.formErrors.rate),1)]),_:1},8,["modelValue","error","disable"])]),t("div",sa,[s(M,{dense:"",type:"number",label:"Qty",modelValue:e.qty,"onUpdate:modelValue":l[4]||(l[4]=n=>e.qty=n),"bottom-slots":"",error:!!e.formErrors.qty},{error:a(()=>[t("div",aa,i(e.formErrors.qty),1)]),_:1},8,["modelValue","error"])]),t("div",{class:U(["col-12 col-md-1",e.$q.screen.lt.md?"text-right":"q-px-sm"])},[s(h,{type:"submit",size:"sm",color:"primary",round:e.$q.screen.gt.sm,icon:"add",label:e.$q.screen.gt.sm?"":"Add Classification"},null,8,["round","label"])],2)])]),_:1},8,["onSubmit"])],2)),e.showAddNames?(r(),u("div",oa,[s(o,{onCloseNames:l[5]||(l[5]=n=>e.showAddNames=!1)})])):p("",!0)])}var na=L(Js,[["render",la]]);const ra=X({props:{job:Object},setup(e,l){const c=te(),{addedNames:g}=G(O()),{upsertName:$}=O(),q=J(10),{capitalize:o}=Oe,n=Q(()=>{const A=new RegExp("^[0-9]{"+q.value+"}","g");return z({firstName:I().required().label("First Name"),lastName:I().required().label("Last Name"),phoneNumber:I().matches(A,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone Number"),ssn:I().min(4).max(4).matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).required().label("Last 4 of SSN")})}),{meta:d,errors:F,handleSubmit:k,handleReset:T}=oe({validationSchema:n}),{value:m}=C("firstName"),{value:b}=C("lastName"),{value:N}=C("phoneNumber"),{value:v}=C("ssn"),w=k(async A=>{console.log(A),c.loading.show();const E={classification:e.job,id:g.value.length+1,firstName:o(A.firstName.toLowerCase()),lastName:o(A.lastName.toLowerCase()),phone:A.phoneNumber,ssn:A.ssn},x=await $({name:E,action:"create"});console.log(x),T(),c.loading.hide(),l.emit("newNameAdded")});return{firstName:m,lastName:b,phoneNumber:N,ssn:v,formMeta:d,formErrors:F,submit:w}}});function ia(e,l,c,g,$,q){return r(),u("div",null,[t("div",null,[s(ne,{onSubmit:le(e.submit,["prevent"])},{default:a(()=>[s(K,null,{default:a(()=>[s(Y,null,{default:a(()=>[s(M,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":l[0]||(l[0]=o=>e.firstName=o),error:!!e.formErrors.firstName},null,8,["modelValue","error"]),s(M,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":l[1]||(l[1]=o=>e.lastName=o),error:!!e.formErrors.lastName},null,8,["modelValue","error"]),s(M,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":l[2]||(l[2]=o=>e.phoneNumber=o),error:!!e.formErrors.phoneNumber},null,8,["modelValue","error"]),s(M,{maxlength:"4",dense:"",label:"Last 4 of SSN",modelValue:e.ssn,"onUpdate:modelValue":l[3]||(l[3]=o=>e.ssn=o),error:!!e.formErrors.ssn},null,8,["modelValue","error"])]),_:1}),s(pe),s(ie,{class:"bg-accent",align:"right"},{default:a(()=>[s(h,{size:e.$q.screen.lt.md?"sm":"",color:"secondary",label:"Cancel",onClick:l[4]||(l[4]=o=>e.$emit("closeNames"))},null,8,["size"]),s(h,{type:"submit",size:e.$q.screen.lt.md?"sm":"",color:"primary",label:"Save"},null,8,["size"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}var da=L(ra,[["render",ia]]);const ma=[{name:2,label:"Request ID",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`}],ua=[{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],ca=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Quantity",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],fa=[{name:3,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Qty",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],pa=[{name:0,label:"Name",align:"left",field:e=>e[6],format:(e,l)=>`${e} ${l[7]}`,sortable:!0,required:!0},{name:1,label:"Phone",align:"right",field:e=>e[8],format:e=>`${e}`,sortable:!0},{name:2,label:"Status",align:"right",field:e=>e.employee[0][80],format:(e,l)=>`${e===""?l[10]:e}`}],ba=X({name:"Open Table",components:{},setup(e,l){const c=te(),{submitCancelRequest:g,submitCancelClassification:$}=O(),{activeProject:q,pendingRequestsForProject:o,pendingRequestsForProjectSummary:n,nameRequestsForProject:d}=G(O()),F=o,k=Q(()=>c.screen.lt.md?100:5);function T(v){c.dialog({title:"Confirm",message:"Are you sure you want to cancel this request?",cancel:!0,persistent:!0}).onOk(async()=>{try{await g({request:v}),c.notify({type:"positive",message:"Request Canceled!",position:"top-right"})}catch(w){c.notify({type:"negative",message:w,position:"top-right"})}})}function m(v){c.dialog({title:"Confirm",message:"Are you sure you want to cancel this classification?",cancel:!0,persistent:!0}).onOk(async()=>{try{await $({item:v}),c.notify({type:"positive",message:"Classification Removed!",position:"top-right"})}catch(w){c.notify({type:"negative",message:w,position:"top-right"})}})}function b(v){l.emit("addSomeNames",v)}function N(v){l.emit("removeName",v)}return console.log(o.value),{columns:ma,rows:F,initialPagination:{rowsPerPage:k},separator:"vertical",secondColumns:ca,mobileColumns:ua,secMobileColumns:fa,nameColumns:pa,activeProject:q,pendingRequestsForProjectSummary:n,cancelRequest:T,cancelClassification:m,addSomeNames:b,removeName:N,nameRequestsForProject:d,dayjs:Qe}}}),ha={class:"q-px-none"},ga={class:"bg-dark text-white"},$a={key:0,class:"text-left"},qa=t("th",{class:"text-left"},"Name",-1),ya={key:1,class:"text-left"},va=t("th",{class:"text-left"},"Status",-1),wa={key:2},Na={key:0,class:"text-left"},Ca={class:"text-left"},Ra={key:1,class:"text-left"},_a={class:"text-left"},ka={class:"text-right"},ja={key:0},Sa={colspan:"100%"},Pa={class:"row"},Va={class:"col-12 col-md-8 q-px-sm"},Fa={class:"col-12 col-md-4 q-px-sm"},Ta={key:0},Ea={colspan:"100%"},Aa={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Oa(e,l,c,g,$,q){return r(),u("div",ha,[s(K,null,{default:a(()=>[s(Y,{class:"q-pb-none"},{default:a(()=>[t("div",{class:U(["text-primary",e.$q.screen.lt.md?"text-body1":"text-h6"])},i(e.$q.screen.gt.md?`Named Requests for ${e.activeProject[20]}`:"Named Requests"),3)]),_:1}),s(Y,null,{default:a(()=>[s(de,{dense:e.$q.screen.lt.md,flat:""},{default:a(()=>[t("thead",ga,[t("tr",null,[e.$q.screen.gt.sm?(r(),u("th",$a,"Request#")):p("",!0),qa,e.$q.screen.gt.sm?(r(),u("th",ya,"Phone")):p("",!0),va,e.$can("create","nameRequests")?(r(),u("td",wa)):p("",!0)])]),t("tbody",null,[(r(!0),u(_,null,V(e.nameRequestsForProject,o=>(r(),u(_,{key:o[3]},[t("tr",{class:U(o.employee[0]===void 0?"":o.employee[0][408]==="Terminated"&&!o.employee[0][421]?"bg-negative text-white":"")},[e.$q.screen.gt.sm?(r(),u("td",Na,i(o[18]),1)):p("",!0),t("td",Ca,i(o[6])+" "+i(o[7]),1),e.$q.screen.gt.sm?(r(),u("td",Ra,i(o[8]),1)):p("",!0),t("td",_a,i(o.employee[0]===void 0?o[10]:o.employee[0][408]==="Terminated"&&!o.employee[0][421]?"Not Eligible":o.employee[0][552]===""?o[10]:o.employee[0][552]),1),t("td",ka,[o.employee[0]!==void 0&&o.employee[0][408]==="Terminated"&&!o.employee[0][421]?(r(),f(h,{key:0,round:"",class:"q-mr-sm",size:e.$q.screen.gt.sm?"sm":"xs",color:"white","text-color":"negative",onClick:n=>o.expand=!o.expand,icon:o.expand?"visibility_off":"visibility"},null,8,["size","onClick","icon"])):p("",!0),e.$can("create","nameRequests")&&o[35]==="Pending"?(r(),f(h,{key:1,round:"",size:"sm",color:"accent",onClick:n=>e.removeName(o),icon:"delete"},null,8,["onClick"])):(r(),f(h,{key:2,round:"",size:"sm",color:"dark",disable:"",icon:"delete"}))])],2),o.expand?(r(),u("tr",ja,[t("td",Sa,[s(K,null,{default:a(()=>[s(Y,null,{default:a(()=>[t("div",Pa,[t("div",Va,[t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","text-primary q-mb-sm"])}," Termination Reason ",2),t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","q-pl-sm"])},i(o.employee[0][420]),3)]),t("div",Fa,[t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","text-primary q-mb-sm"])}," Termination Date ",2),t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","q-pl-sm"])},i(e.dayjs(o.employee[0][400].$d).format("MM/DD/YYYY")),3)])])]),_:2},1024)]),_:2},1024)])])):p("",!0)],64))),128)),e.nameRequestsForProject.length<1?(r(),u("tr",Ta,[t("td",Ea,[t("div",Aa,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(`There are no named requests for ${e.activeProject[20]}`),1)])])])):p("",!0)])]),_:1},8,["dense"])]),_:1})]),_:1})])}var Qa=L(ba,[["render",Oa]]);const za=[{name:1,label:"Craft",align:"left",field:e=>e.craft[10],format:e=>`${e}`,sortable:!0},{name:2,label:"Classification",align:"left",field:e=>e.job[18],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Rate",align:"left",field:e=>e.rate,format:e=>`${e}`,sortable:!0},{name:4,label:"Qty",align:"left",field:e=>e.qty,format:e=>`${e}`,sortable:!0,required:!0}],Ua=[{name:1,label:"Name",align:"left",field:e=>e.firstName,format:(e,l)=>`${e} ${l.lastName}`,sortable:!0},{name:2,label:"Phone",align:"left",field:e=>e.phone,format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Last 4",align:"left",field:e=>e.ssn,format:e=>`${e}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.classification.job[18],format:e=>`${e}`,sortable:!0,required:!0}],Ma=X({name:"Requests",components:{openTable:vt,closedTable:Xt,pendingTable:Ps,addClassifications:na,addNamesDialog:da,nameRequestTable:Qa},setup(){const e=te(),{requestOptions:l,getClassifications:c,openRequestsForProject:g,pendingRequestsForProject:$,closedRequestsForProject:q,nameRequestsForProject:o}=G(O()),{storeRequest:n,resetRequest:d,spliceClassification:F,spliceName:k,upsertName:T}=O(),m=J(0),b=J(!1),N=J(!1),v=J(null),w=[{value:"Name Request Only",description:"The hiring center will only hire the names you provide, even if you DO NOT provide enough names to fill the quantity you request."},{value:"Open",description:"The hiring center will fill positions by recruiting and selecting the most qualified candidates available."},{value:"Mixed",description:"The hiring center will hire all of the names that you provide and fill remaining positions by recruiting and selecting the most qualified candidates available."}];fe(c,()=>{console.log(c.value)});const A=z({jobNumber:z().required("Job number is required."),contact:z().required().nullable("Contact is required."),location:z().required().nullable("Location is required."),perdiem:z().nullable(),dateNeeded:ze().required().nullable("Date needed is required."),restriction:z().required().label("Request Type")}),{meta:E,errors:x,handleSubmit:be,handleReset:me}=oe({validationSchema:A,initialValues:{restriction:w[1]}}),{value:he}=C("jobNumber"),{value:ge}=C("contact"),{value:$e}=C("location"),{value:qe}=C("perdiem"),{value:ye}=C("dateNeeded"),{value:ve}=C("restriction"),we=be(async j=>{console.log(j),n({request:j}),me(),m.value=1,b.value=!1,e.notify({type:"positive",message:"Request submitted!"})}),Ne=Q(()=>{const j=[];return c.value.forEach(Ee=>{Ee.names.forEach(Ae=>{j.push(Ae)})}),j}),Ce=Q(()=>l.value.jobNumbers),Re=Q(()=>l.value.perdiem.length>0?l.value.perdiem:null),_e=Q(()=>l.value.locations),ke=Q(()=>l.value.contacts);function je(){e.dialog({title:"Confirm",message:"Are you sure you want to cancel? All of your progress will be lost.",cancel:!0,persistent:!0}).onOk(()=>{d(),b.value=!1,me()})}function Se(j){e.dialog({title:"Confirm",message:"Are you sure you want to delete this classification?",cancel:!0,persistent:!0}).onOk(()=>{F({item:j})})}function Pe(j){e.dialog({title:"Confirm",message:"Are you sure you want to delete this name?",cancel:!0,persistent:!0}).onOk(()=>{k({item:j})})}function Ve(j){console.log(j),e.dialog({title:"Confirm",message:`Are you sure you want to delete ${j[6]} ${j[7]} from request# ${j[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{await T({name:j,action:"delete"}),e.notify({type:"positive",message:"Name deleted!"})})}function Fe(j){v.value=j,N.value=!0}function Te(){e.notify({type:"positive",message:"New name added!"}),v.value=null,N.value=!1}return console.log(o.value),{tab:m,showNew:b,getClassifications:c,columns:za,nameColumns:Ua,jobNumbers:Ce,perdiems:Re,locations:_e,contacts:ke,restrictions:w,submitRequest:we,jobNumber:he,contact:ge,location:$e,perdiem:qe,dateNeeded:ye,restriction:ve,formMeta:E,formErrors:x,removeClassification:Se,cancelNew:je,openRequestsForProject:g,pendingRequestsForProject:$,closedRequestsForProject:q,removeName:Pe,names:Ne,addSomeNames:Fe,showAddSomeNames:N,jobForNewName:v,newNameAdded:Te,deleteName:Ve,nameRequestsForProject:o}}}),La={class:"q-px-sm"},Da={class:"row justify-between"},Ba={class:"col-12 col-md-5 q-pr-lg"},Ja={class:"text-caption"},Ia=t("div",null,[t("span",null,"Request Type")],-1),Ya={class:"text-caption"},Ka={class:"text-caption"},Wa={class:"text-caption"},Xa={class:"text-caption"},Ga={class:"text-caption"},Ha={class:"text-caption"},Za={class:"col-12 col-md-7"},xa={class:"q-mt-md"},eo={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},to={key:1,class:"q-mt-md"},so={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function ao(e,l,c,g,$,q){const o=D("open-table"),n=D("pending-table"),d=D("name-request-table"),F=D("closed-table"),k=D("add-classifications"),T=D("add-names-dialog");return r(),u("div",null,[t("div",La,[s(ce,{duration:100},{default:a(()=>[H(t("div",null,[e.$q.screen.lt.md?(r(),f(K,{key:0,flat:"",class:"q-mb-sm q-mt-none q-pt-none"},{default:a(()=>[s(ie,{align:"right"},{default:a(()=>[e.$can("create","projectRequests")?(r(),f(h,{key:0,dense:"",color:"primary",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:l[0]||(l[0]=m=>e.showNew=!0)},null,8,["label"])):p("",!0)]),_:1})]),_:1})):p("",!0),s(Ue,{class:"bg-info text-white shadow-2 rounded-borders"},{default:a(()=>[s(De,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=m=>e.tab=m),"bg-color":"none","indicator-color":"accent",dense:e.$q.screen.lt.md},{default:a(()=>[s(se,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},{default:a(()=>[e.openRequestsForProject.length>0?(r(),f(re,{key:0,color:"accent",floating:"",transparent:""},{default:a(()=>[S(i(e.openRequestsForProject.length),1)]),_:1})):p("",!0)]),_:1},8,["label"]),e.$q.screen.gt.sm?(r(),f(se,{key:0,name:1,label:e.$q.screen.gt.xs?"Pending Requests":"Pending"},{default:a(()=>[e.pendingRequestsForProject.length>0?(r(),f(re,{key:0,color:"accent",floating:"",transparent:""},{default:a(()=>[S(i(e.pendingRequestsForProject.length),1)]),_:1})):p("",!0)]),_:1},8,["label"])):p("",!0),e.$can("read","nameRequests")?(r(),f(se,{key:1,name:2,label:e.$q.screen.gt.xs?"Named Requests":"Named"},{default:a(()=>[e.nameRequestsForProject.length>0?(r(),f(re,{key:0,color:"accent",floating:"",transparent:""},{default:a(()=>[S(i(e.nameRequestsForProject.length),1)]),_:1})):p("",!0)]),_:1},8,["label"])):p("",!0),e.$q.screen.gt.sm?(r(),f(se,{key:2,name:3,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},null,8,["label"])):p("",!0)]),_:1},8,["modelValue","dense"]),s(Je),!e.showNew&&e.$q.screen.gt.sm?(r(),f(h,{key:0,dense:"",color:"accent",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:l[2]||(l[2]=m=>e.showNew=!0)},null,8,["label"])):p("",!0)]),_:1}),s(Be,{modelValue:e.tab,"onUpdate:modelValue":l[3]||(l[3]=m=>e.tab=m),animated:""},{default:a(()=>[s(ae,{name:0},{default:a(()=>[s(o,{onAddSomeNames:e.addSomeNames,onRemoveName:e.deleteName},null,8,["onAddSomeNames","onRemoveName"])]),_:1}),s(ae,{name:1},{default:a(()=>[s(n,{onAddSomeNames:e.addSomeNames,onRemoveName:e.deleteName},null,8,["onAddSomeNames","onRemoveName"])]),_:1}),s(ae,{name:2},{default:a(()=>[s(d,{onRemoveName:e.deleteName},null,8,["onRemoveName"])]),_:1}),s(ae,{name:3},{default:a(()=>[s(F)]),_:1})]),_:1},8,["modelValue"])],512),[[Z,!e.showNew]])]),_:1}),s(ce,{duration:100},{default:a(()=>[H(t("div",null,[s(K,null,{default:a(()=>[s(ne,{onSubmit:le(e.submitRequest,["prevent"])},{default:a(()=>[s(Y,null,{default:a(()=>[t("div",Da,[t("div",Ba,[s(B,{class:"q-mb-sm",dense:"","label-slot":"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.restriction,"onUpdate:modelValue":l[4]||(l[4]=m=>e.restriction=m),options:e.restrictions,"option-label":"value","display-value":e.restriction?e.restriction.value:"","bottom-slots":"",error:!!e.formErrors.restriction},{error:a(()=>[t("div",Ja,i(e.formErrors.restriction),1)]),label:a(()=>[Ia]),after:a(()=>[s(h,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:a(()=>[s(Ie,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:a(()=>[t("div",null,[t("div",Ya,i(e.restriction?e.restriction.description:""),1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Select Job Number","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.jobNumber,"onUpdate:modelValue":l[5]||(l[5]=m=>e.jobNumber=m),options:e.jobNumbers,"option-label":"11","display-value":`${e.jobNumber?e.jobNumber[11]:""}`,"bottom-slots":"",error:!!e.formErrors.jobNumber},{error:a(()=>[t("div",Ka,i(e.formErrors.jobNumber),1)]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Select Contact","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.contact,"onUpdate:modelValue":l[6]||(l[6]=m=>e.contact=m),options:e.contacts,"option-label":"17","display-value":`${e.contact?e.contact[17]:""}`,"bottom-slots":"",error:!!e.formErrors.contact},{error:a(()=>[t("div",Wa,i(e.formErrors.contact),1)]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Select Meeting Location","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.location,"onUpdate:modelValue":l[7]||(l[7]=m=>e.location=m),options:e.locations,"option-label":"6","display-value":`${e.location?e.location[6]:""}`,"bottom-slots":"",error:!!e.formErrors.location},{error:a(()=>[t("div",Xa,i(e.formErrors.location),1)]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Per Diem","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.perdiem,"onUpdate:modelValue":l[8]||(l[8]=m=>e.perdiem=m),options:e.perdiems,"option-label":"20","display-value":`${e.perdiem?e.perdiem[20]:""}`,"bottom-slots":"",error:!!e.formErrors.perdiem},{error:a(()=>[t("div",Ga,i(e.formErrors.perdiem),1)]),_:1},8,["modelValue","options","display-value","error"]),s(M,{dense:"",type:"date",modelValue:e.dateNeeded,"onUpdate:modelValue":l[9]||(l[9]=m=>e.dateNeeded=m),"bottom-slots":"",error:!!e.formErrors.dateNeeded,label:"Date Needed","stack-label":""},{error:a(()=>[t("div",Ha,i(e.formErrors.dateNeeded),1)]),_:1},8,["modelValue","error"])]),t("div",Za,[e.$q.screen.lt.md?(r(),f(pe,{key:0,color:"primary"})):p("",!0),s(k,{clearForm:!e.showNew},null,8,["clearForm"]),t("div",xa,[s(W,{dense:"",rows:e.getClassifications,"row-key":"id",columns:e.columns,"table-header-class":"bg-secondary","no-data-label":"At least one classification is required."},{"no-data":a(({message:m})=>[t("div",eo,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(m),1)])]),header:a(m=>[s(R,{class:"bg-dark text-white",props:m},{default:a(()=>[(r(!0),u(_,null,V(m.cols,b=>(r(),f(P,{key:b.name,props:m},{default:a(()=>[S(i(b.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:a(m=>[s(R,{props:m},{default:a(()=>[(r(!0),u(_,null,V(m.cols,b=>(r(),f(y,{key:b.name,props:m},{default:a(()=>[S(i(b.value),1)]),_:2},1032,["props"]))),128)),s(y,{"auto-width":""},{default:a(()=>[s(h,{size:"xs",round:"",color:"primary",onClick:b=>e.removeClassification(m.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),e.names.length>0&&e.$can("read","nameRequests")?(r(),u("div",to,[s(W,{dense:"",rows:e.names,"row-key":"id",columns:e.nameColumns,"table-header-class":"bg-secondary","no-data-label":"No names added."},{"no-data":a(({message:m})=>[t("div",so,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(m),1)])]),header:a(m=>[s(R,{class:"bg-dark text-white",props:m},{default:a(()=>[(r(!0),u(_,null,V(m.cols,b=>(r(),f(P,{key:b.name,props:m},{default:a(()=>[S(i(b.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:a(m=>[s(R,{props:m},{default:a(()=>[(r(!0),u(_,null,V(m.cols,b=>(r(),f(y,{key:b.name,props:m},{default:a(()=>[S(i(b.value),1)]),_:2},1032,["props"]))),128)),s(y,{"auto-width":""},{default:a(()=>[s(h,{size:"xs",round:"",color:"primary",onClick:b=>e.removeName(m.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])):p("",!0)])])]),_:1}),s(ie,{align:"right"},{default:a(()=>[s(h,{color:"dark",label:"Cancel",onClick:e.cancelNew},null,8,["onClick"]),s(h,{disabled:!e.getClassifications.length>0,color:"primary",label:"Submit",type:"submit"},null,8,["disabled"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})],512),[[Z,e.showNew]])]),_:1})]),s(Me,{modelValue:e.showAddSomeNames,"onUpdate:modelValue":l[11]||(l[11]=m=>e.showAddSomeNames=m),persistent:""},{default:a(()=>[s(T,{job:e.jobForNewName,onCloseNames:l[10]||(l[10]=m=>e.showAddSomeNames=!1),onNewNameAdded:e.newNameAdded},null,8,["job","onNewNameAdded"])]),_:1},8,["modelValue"])])}var oo=L(Ma,[["render",ao]]);const lo={name:"Requests",components:{RequestPage:oo},setup(){return{}}};function no(e,l,c,g,$,q){const o=D("request-page");return r(),f(Le,{style:{"max-width":"100vw"}},{default:a(()=>[s(o)]),_:1})}var po=L(lo,[["render",no]]);export{po as default};
