import{l as J,bI as L,cz as Q,bJ as T,bW as V,r as c,c as f,cA as p,_ as M,b$ as j,p as m,t as D,v as n,d as l,bb as t,ag as b,an as A,a4 as d,ah as R,c0 as U,bO as x,bP as W,bR as k,bQ as H,F as C,aR as Y,c7 as P,aS as G,c1 as K}from"./index.71a5d202.js";import{a as X,Q as _,b as N,c as Z}from"./QTabPanels.9edfe193.js";import{b as ee,Q as S,a as ae}from"./QTd.5f62e175.js";import{a as F,b as te}from"./QTable.643a65dc.js";const le=[{name:1,label:"Name",align:"left",field:e=>e.employee[24],format:e=>`${e}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?j.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],se=[{name:1,label:"Name",align:"left",field:e=>e.employee[24],format:e=>`${e}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?j.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],oe=J({name:"Table",components:{},setup(){const e=L(),s=Q(),g=T(),{assignmentsForProject:u}=V(s),y=u,{active:v}=V(T()),{getAssignments:a}=Q(),i=c(""),h=c(null),$=c(null),B=c(0),I=c(!1);a();const w=f(()=>{let o=[];return y.value.forEach(r=>{r[75].toLowerCase().includes(i.value.toLowerCase())&&o.push(r)}),o=h.value?o.filter(r=>p(r[1].$d).tz("America/Chicago").format("MM/DD/YYYY")===p(h.value).tz("America/Chicago").format("MM/DD/YYYY")):o,o=$.value?o.filter(r=>r[68]===$.value):o,o.sort((r,q)=>r.employee[24]>q.employee[24]?1:-1)}),E=f(()=>e.screen.lt.md?100:w.value.length>=25?Math.round(w.value.length/5):5),O=f(()=>[...new Map(u.value.map(o=>[o[68],o[68]])).values()]),z=f(()=>{const o=p().subtract(7,"day");return u.value.filter(r=>p(r[1].$d).isSameOrAfter(o)&&p(r[1].$d).isSameOrBefore(p())).sort((r,q)=>r.employee[24]>q.employee[24]?1:-1)});return{columns:le,mobileColumns:se,rows:w,initialPagination:{rowsPerPage:E},separator:"vertical",projectStore:g,active:v,search:i,startDateFilter:h,craftOptions:O,craftFilter:$,assignmentsForProject:u,tab:B,newArrivals:z,showEmployee:I}}}),re={class:"q-px-sm"},ne={class:"row items-center"},ie={class:"col-12 col-md-4 q-px-sm"},de={class:"col-12 col-md-4 q-px-sm"},me={class:"col-12 col-md-4 q-px-sm"},ue={class:"text-dark text-caption text-italic"},pe={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},ce={class:"text-dark text-caption text-italic"},fe={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function be(e,s,g,u,y,v){return m(),D("div",re,[n("div",null,[n("div",null,[l(U,{class:"bg-info text-white shadow-2 rounded-borders"},{default:t(()=>[l(X,{modelValue:e.tab,"onUpdate:modelValue":s[0]||(s[0]=a=>e.tab=a),"bg-color":"none","indicator-color":"accent",align:"justify",dense:""},{default:t(()=>[l(_,{name:0,label:e.$q.screen.gt.xs?"All Employees":"Employees"},null,8,["label"]),l(_,{name:1,label:"New Arrivals"},{default:t(()=>[e.newArrivals.length>0?(m(),b(ee,{key:0,color:"accent",floating:"",transparent:""},{default:t(()=>[A(d(e.newArrivals.length),1)]),_:1})):R("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Z,{modelValue:e.tab,"onUpdate:modelValue":s[4]||(s[4]=a=>e.tab=a),animated:""},{default:t(()=>[l(N,{class:"q-px-xs",name:0},{default:t(()=>[l(x,{flat:""},{default:t(()=>[l(W,{class:"q-pt-none"},{default:t(()=>[n("div",ne,[n("div",ie,[l(k,{dense:e.$q.screen.lt.md,modelValue:e.search,"onUpdate:modelValue":s[1]||(s[1]=a=>e.search=a),label:"Search"},null,8,["dense","modelValue"])]),n("div",de,[l(k,{dense:e.$q.screen.lt.md,modelValue:e.startDateFilter,"onUpdate:modelValue":s[2]||(s[2]=a=>e.startDateFilter=a),label:"Arrival Date",type:"date","stack-label":""},null,8,["dense","modelValue"])]),n("div",me,[l(H,{dense:e.$q.screen.lt.md,label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craftFilter,"onUpdate:modelValue":s[3]||(s[3]=a=>e.craftFilter=a),options:e.craftOptions,"use-chips":""},null,8,["dense","modelValue","options"])])])]),_:1})]),_:1}),l(F,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Employees":`Employees for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":t(()=>[n("div",ue,"(Total: "+d(e.assignmentsForProject.length)+" employees)",1)]),header:t(a=>[l(S,{class:"bg-dark text-white",props:a},{default:t(()=>[(m(!0),D(C,null,Y(a.cols,i=>(m(),b(te,{key:i.name,props:a},{default:t(()=>[A(d(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":t(({message:a})=>[n("div",pe,[l(P,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),n("span",null,d(a),1)])]),body:t(a=>[l(S,{props:a},{default:t(()=>[(m(!0),D(C,null,Y(a.cols,i=>(m(),b(ae,{key:i.name,props:a},{default:t(()=>[A(d(i.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),_:1}),l(N,{class:"q-px-xs",name:1},{default:t(()=>[l(F,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Arrived Last 7 Days":`Arrived Last 7 Days at ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.newArrivals,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":t(()=>[n("div",ce,"(Total: "+d(e.newArrivals.length)+" new arrivals)",1)]),"no-data":t(({message:a})=>[n("div",fe,[l(P,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),n("span",null,d(a),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),_:1})]),_:1},8,["modelValue"])])])])}var ge=M(oe,[["render",be],["__scopeId","data-v-124d511a"]]);const ye={name:"Arrivals",components:{employeesTable:ge},setup(){return{}}};function ve(e,s,g,u,y,v){const a=G("employees-table");return m(),b(K,{style:{"max-width":"100vw"}},{default:t(()=>[l(a)]),_:1})}var De=M(ye,[["render",ve]]);export{De as default};
