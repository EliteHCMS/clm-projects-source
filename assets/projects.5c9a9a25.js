var be=Object.defineProperty,fe=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var W=(e,a,s)=>a in e?be(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,Z=(e,a)=>{for(var s in a||(a={}))pe.call(a,s)&&W(e,s,a[s]);if(K)for(var s of K(a))ve.call(a,s)&&W(e,s,a[s]);return e},x=(e,a)=>fe(e,ce(a));import{h as k,D as ie,E as ge,G as ye,r as w,c as $,H as he,w as L,I as we,J as B,K as Ve,L as je,g as $e,l as _,M as ue,N as de,O,P as F,Q as qe,R as ee,q as ae,_ as M,p as n,t as c,S as h,U as o,d as l,F as Q,V as R,W as q,X as te,Y as le,Z as oe,$ as se,v as y,a0 as T,a1 as z,a2 as re,a3 as Ce,a4 as I,a5 as me}from"./index.d6de6ffa.js";import{Q as D,a as Y,b as U,c as X}from"./QTabPanels.9d138e2c.js";import{Q as G}from"./QTable.63afa7da.js";const Se=k("div",{class:"q-space"});var ne=ie({name:"QSpace",setup(){return()=>Se}}),ke=ie({name:"QSplitter",props:x(Z({},ge),{modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]}),emits:["update:modelValue"],setup(e,{slots:a,emit:s}){const{proxy:{$q:v}}=$e(),g=ye(e,v),f=w(null),t={before:w(null),after:w(null)},r=$(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(g.value===!0?" q-splitter--dark":"")),d=$(()=>e.horizontal===!0?"height":"width"),A=$(()=>e.reverse!==!0?"before":"after"),p=$(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function V(u){return(e.unit==="%"?u:Math.round(u))+e.unit}const C=$(()=>({[A.value]:{[d.value]:V(e.modelValue)}}));let J,S,P,m,b;function i(u){if(u.isFirst===!0){const E=f.value.getBoundingClientRect()[d.value];J=e.horizontal===!0?"up":"left",S=e.unit==="%"?100:E,P=Math.min(S,p.value[1],Math.max(p.value[0],e.modelValue)),m=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:v.lang.rtl===!0?-1:1)*(e.unit==="%"?E===0?0:100/E:1),f.value.classList.add("q-splitter--active");return}if(u.isFinal===!0){b!==e.modelValue&&s("update:modelValue",b),f.value.classList.remove("q-splitter--active");return}const j=P+m*(u.direction===J?-1:1)*u.distance[e.horizontal===!0?"y":"x"];b=Math.min(S,p.value[1],Math.max(p.value[0],j)),t[A.value].value.style[d.value]=V(b),e.emitImmediately===!0&&e.modelValue!==b&&s("update:modelValue",b)}const N=$(()=>[[he,i,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function H(u,j){u<j[0]?s("update:modelValue",j[0]):u>j[1]&&s("update:modelValue",j[1])}return L(()=>e.modelValue,u=>{H(u,p.value)}),L(()=>e.limits,()=>{we(()=>{H(e.modelValue,p.value)})}),()=>{const u=[k("div",{ref:t.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:C.value.before},B(a.before)),k("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Ve("div",{class:"q-splitter__separator-area absolute-full"},B(a.separator),"sep",e.disable!==!0,()=>N.value)]),k("div",{ref:t.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:C.value.after},B(a.after))];return k("div",{class:r.value,ref:f},je(a.default,u))}}});const Ae=[{name:0,label:"Job Title",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Avg. Rate",align:"right",field:e=>e.avgRate,format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:2,label:"Times Requested",align:"right",field:e=>e.timesRequested,format:e=>`${e}`,sortable:!0},{name:2,label:"Quantity Requested",align:"right",field:e=>e.qtyRequested,format:e=>`${e}`,sortable:!0}],Je=_({setup(){const e=ue(),{projectCrafts:a,active:s}=de(O()),{udpateProjectCrafts:v}=O(),g=w(a.value[0][3]),f=w(!1);console.log(a.value),L(s,(m,b)=>{g.value=m.crafts.sort((i,N)=>i.order>N.order?1:-1)[0][3]});const t=F({job:F().required("Job is required."),alias:F().required("Alias is required.").nullable()}),{meta:r,errors:d,handleSubmit:A,handleReset:p}=qe({validationSchema:t}),{value:V}=ee("job"),{value:C}=ee("alias"),J=A(async m=>{console.log(m);const b=a.value.find(i=>i[9]===m.job[13]);if(b===void 0)e.notify({type:"negative",message:"Something went wrong"});else try{const{data:i}=await ae.upsertRecordsXML({to:"bpzpx5m7x",data:[{9:{value:m.alias[3]},13:{value:m.job[3]},20:{value:b[3]}}],fieldsToReturn:[153],formatObject:153});console.log(i),i.length>0&&(v({craft:i[0][153]}),p(),f.value=!1,e.notify({type:"positive",message:"New job added!"}))}catch{e.notify({type:"negative",message:"Something went wrong"})}});async function S(m,b){console.log(V.value),console.log(m),e.dialog({title:"Confirm",message:`Confirm you want to add "${m}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:i}=await ae.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:V.value[3]},7:{value:m},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(i),i.length>0&&(C.value=i[0][25],b(i[0][25]))}catch{e.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{b()})}function P(){f.value=!1,p()}return{projectCrafts:a,tab:g,columns:Ae,initialPagination:{rowsPerPage:100},splitValue:w(20),showAddJob:f,formMeta:r,formErrors:d,job:V,alias:C,submitJob:J,submitAlias:S,cancelAddJob:P}}}),Pe={key:0},Qe={key:1},Re={class:"row justify-between"},Te={class:"col-5"},ze={class:"text-caption"},De={class:"col-6"},Ue={class:"text-caption"},_e={key:1},Me={key:0},Ne={key:1},Ee={class:"text-caption"},Be={class:"text-caption"};function Fe(e,a,s,v,g,f){return n(),c("div",null,[e.$q.screen.gt.sm?(n(),h(ke,{key:0,modelValue:e.splitValue,"onUpdate:modelValue":a[5]||(a[5]=t=>e.splitValue=t)},{before:o(()=>[l(Y,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=t=>e.tab=t),vertical:e.$q.screen.gt.md,align:"left","indicator-color":"accent","active-bg-color":"dark","active-color":"white"},{default:o(()=>[(n(!0),c(Q,null,R(e.projectCrafts,t=>(n(),h(D,{key:t[3],name:t[3],label:t[10]},null,8,["name","label"]))),128))]),_:1},8,["modelValue","vertical"])]),after:o(()=>[l(X,{modelValue:e.tab,"onUpdate:modelValue":a[4]||(a[4]=t=>e.tab=t),animated:"",vertical:e.$q.screen.gt.md},{default:o(()=>[(n(!0),c(Q,null,R(e.projectCrafts,t=>(n(),h(U,{key:t[3],name:t[3],class:"q-pt-none"},{default:o(()=>[e.showAddJob?(n(),c("div",Qe,[l(te,{onSubmit:le(e.submitJob,["prevent"])},{default:o(()=>[l(oe,{flat:""},{default:o(()=>[l(se,null,{default:o(()=>[y("div",Re,[y("div",Te,[l(T,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":a[2]||(a[2]=r=>e.job=r),options:t.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:o(()=>[y("div",ze,z(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"])]),y("div",De,[l(T,{disable:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":a[3]||(a[3]=r=>e.alias=r),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:o(()=>[y("div",Ue,z(e.formErrors.alias),1)]),_:1},8,["disable","modelValue","options","display-value","error","onNewValue"])])])]),_:2},1024),l(re,{align:"right"},{default:o(()=>[l(q,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),l(q,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(n(),c("div",Pe,[l(G,{rows:t.classifications.sort((r,d)=>r.order>d.order?-1:1),columns:e.columns,"hide-pagination":!0,"row-key":"name",pagination:e.initialPagination,"table-header-class":"bg-dark text-white"},{top:o(()=>[l(q,{color:"primary",label:"Add Another Job",onClick:a[1]||(a[1]=r=>e.showAddJob=!0)}),l(ne)]),_:2},1032,["rows","columns","pagination"])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","vertical"])]),_:1},8,["modelValue"])):(n(),c("div",_e,[l(Y,{modelValue:e.tab,"onUpdate:modelValue":a[6]||(a[6]=t=>e.tab=t),align:"left",class:"shadow-2","indicator-color":"accent"},{default:o(()=>[(n(!0),c(Q,null,R(e.projectCrafts,t=>(n(),h(D,{key:t[3],name:t[3],label:t.abbr},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),l(X,{modelValue:e.tab,"onUpdate:modelValue":a[10]||(a[10]=t=>e.tab=t),animated:""},{default:o(()=>[(n(!0),c(Q,null,R(e.projectCrafts,t=>(n(),h(U,{key:t[3],name:t[3]},{default:o(()=>[e.showAddJob?(n(),c("div",Ne,[l(te,{onSubmit:le(e.submitJob,["prevent"])},{default:o(()=>[l(oe,{flat:""},{default:o(()=>[l(se,null,{default:o(()=>[l(T,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":a[8]||(a[8]=r=>e.job=r),options:t.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:o(()=>[y("div",Ee,z(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"]),l(T,{disabled:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":a[9]||(a[9]=r=>e.alias=r),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:o(()=>[y("div",Be,z(e.formErrors.alias),1)]),_:1},8,["disabled","modelValue","options","display-value","error","onNewValue"])]),_:2},1024),l(re,{align:"right"},{default:o(()=>[l(q,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),l(q,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(n(),c("div",Me,[l(G,{rows:t.classifications.sort((r,d)=>r.order>d.order?-1:1),columns:e.columns,"hide-pagination":!0,"row-key":"name",pagination:e.initialPagination,"table-header-class":"bg-dark text-white"},{top:o(()=>[l(q,{color:"primary",label:"Add Another Job",onClick:a[7]||(a[7]=r=>e.showAddJob=!0)}),l(ne)]),_:2},1032,["rows","columns","pagination"])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]))])}var Le=M(Je,[["render",Fe]]);const Oe=[{name:0,label:"Date Created",align:"left",field:e=>e[1],format:e=>`${Ce.formatDate(e.$d,"MM/DD/YYYY")}`,sortable:!0},{name:1,label:"Name",align:"left",field:e=>e,format:e=>`${e[35]} ${e[37]}`,sortable:!0},{name:2,label:"Role",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:3,label:"Email",align:"left",field:e=>e[6],format:e=>`${e}`,sortable:!0},{name:4,label:"Last Access",align:"left",field:e=>e,format:e=>`${e.registered?e.lastLogin.date:"Never"}`,sortable:!0}],Ie=_({setup(){const{usersForProject:e}=de(O());return{usersForProject:e,columns:Oe,initialPagination:{rowsPerPage:100}}}});function Ye(e,a,s,v,g,f){return n(),c("div",null,[l(G,{rows:e.usersForProject.sort((t,r)=>t[44]>r[44]?-1:1),columns:e.columns,"hide-pagination":!0,"row-key":"name",pagination:e.initialPagination,"table-header-class":"bg-dark text-white"},null,8,["rows","columns","pagination"])])}var Xe=M(Ie,[["render",Ye]]);const Ge=_({name:"Projects",components:{JobsTab:Le,UsersTab:Xe},setup(){return ue(),{tab:w(0)}}});function He(e,a,s,v,g,f){const t=I("jobs-tab"),r=I("users-tab");return n(),h(me,{style:{"max-width":"100vw"}},{default:o(()=>[y("div",null,[l(Y,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=d=>e.tab=d),"bg-color":"none",color:"dark","active-color":"primary","indicator-color":"accent",align:"justify",dense:""},{default:o(()=>[l(D,{name:0,label:e.$q.screen.gt.xs?"Available Jobs":"Jobs"},null,8,["label"]),l(D,{name:1,label:"Users"})]),_:1},8,["modelValue"]),l(X,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=d=>e.tab=d),animated:""},{default:o(()=>[l(U,{class:"q-px-xs",name:0},{default:o(()=>[l(t)]),_:1}),l(U,{class:"q-px-xs",name:1},{default:o(()=>[l(r)]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Ke=M(Ge,[["render",He]]);const We=_({name:"PageIndex",components:{ProjectTabs:Ke},setup(){return{}}});function Ze(e,a,s,v,g,f){const t=I("project-tabs");return n(),h(me,{padding:"",style:{"max-width":"100vw"}},{default:o(()=>[l(t)]),_:1})}var la=M(We,[["render",Ze]]);export{la as default};
