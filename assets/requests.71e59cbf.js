import{D as le,c as y,h as G,J as K,g as he,l as E,M as I,N as A,aO as P,_ as M,p as d,t as p,d as a,U as s,$ as H,v as t,a1 as n,Z as F,F as w,V as C,S as $,aP as _,ac as L,W as R,a7 as Q,aQ as O,P as k,aR as ee,Q as re,R as j,a0 as T,aM as x,aS as D,y as te,Y as ne,X as ie,r as ae,w as $e,aT as qe,a3 as J,a2 as se,aU as oe,aI as ve,a4 as ye}from"./index.15673716.js";import{a as we,Q as Y,c as Ce,b as Z}from"./QTabPanels.06701205.js";import{a as v,Q as V}from"./QTable.3532b9b2.js";var q=le({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const u=y(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>G("tr",{class:u.value},K(l.default))}}),h=le({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const u=he(),m=y(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return G("td",{class:m.value},K(l.default));const f=u.vnode.key,c=(e.props.colsMap!==void 0?e.props.colsMap[f]:null)||e.props.col;if(c===void 0)return;const{row:o}=e.props;return G("td",{class:m.value+c.__tdClass(o),style:c.__tdStyle(o)},K(l.default))}}});const _e=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Deployed",align:"right",field:e=>e[254],format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0}],Re=[{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],je=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:e=>e[17],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.accepted.length,format:e=>`${e}`},{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0}],ke=[{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0}],Pe=E({name:"Open Table",components:{},setup(){const e=I(),{activeProject:l,openRequestsForProject:u,openRequestsForProjectSummary:m}=A(P()),f=u,c=y(()=>e.screen.lt.md?100:5);return{columns:_e,rows:f,initialPagination:{rowsPerPage:c},separator:"vertical",secondColumns:je,mobileColumns:Re,secMobileColumns:ke,activeProject:l,openRequestsForProjectSummary:m}}}),Se={class:"q-px-none"},Ne={class:"row text-caption"},Ve={class:"col-12 col-md-2"},Te=t("span",{class:"text-accent"},"Total Requests:",-1),Fe={class:"text-white q-ml-sm"},Qe={class:"col-12 col-md-2"},Oe=t("span",{class:"text-accent"},"Classifications:",-1),Ee={class:"text-white q-ml-sm"},Ae={class:"col-12 col-md-2"},Me=t("span",{class:"text-accent"},"Total Need:",-1),ze={class:"text-white q-ml-sm"},Be={class:"col-12 col-md-2"},Ue=t("span",{class:"text-accent"},"Balance:",-1),Je={class:"text-white q-ml-sm"},De={class:"col-12 col-md-2"},Ie=t("span",{class:"text-accent"},"Avg. Rate:",-1),He={class:"text-white q-ml-sm"},Le={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function We(e,l,u,m,f,c){return d(),p("div",Se,[a(F,{class:"q-mb-md bg-dark"},{default:s(()=>[a(H,{class:"q-pa-sm"},{default:s(()=>[t("div",Ne,[t("div",Ve,[t("div",null,[Te,t("span",Fe,n(e.openRequestsForProjectSummary.requestCount),1)])]),t("div",Qe,[t("div",null,[Oe,t("span",Ee,n(e.openRequestsForProjectSummary.classCount),1)])]),t("div",Ae,[t("div",null,[Me,t("span",ze,n(e.openRequestsForProjectSummary.need),1)])]),t("div",Be,[t("div",null,[Ue,t("span",Je,n(e.openRequestsForProjectSummary.balance),1)])]),t("div",De,[t("div",null,[Ie,t("span",He,"$ "+n(e.openRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),a(V,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Open Requests for ${e.activeProject[20]}`:"Open Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no open requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.md},{header:s(o=>[a(q,{class:"bg-dark text-white",props:o},{default:s(()=>[a(v,{"auto-width":""}),(d(!0),p(w,null,C(o.cols,r=>(d(),$(v,{key:r.name,props:o},{default:s(()=>[_(n(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":s(({message:o})=>[t("div",Le,[a(L,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(o),1)])]),body:s(o=>[a(q,{props:o},{default:s(()=>[a(h,{"auto-width":""},{default:s(()=>[a(R,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:r=>o.expand=!o.expand,icon:o.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(d(!0),p(w,null,C(o.cols,r=>(d(),$(h,{key:r.name,props:o},{default:s(()=>[_(n(r.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),Q(a(q,{props:o},{default:s(()=>[a(h,{colspan:"100%"},{default:s(()=>[a(V,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:o.row.classes,"row-key":"3","table-header-class":"bg-secondary"},null,8,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[O,o.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var Xe=M(Pe,[["render",We]]);const Ye=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],Ze=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],Ge=[{name:1,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],Ke=[{name:1,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],xe=E({name:"Closed Table",components:{},setup(){const e=I(),{activeProject:l,closedRequestsForProject:u,closedRequestsForProjectSummary:m}=A(P()),f=u,c=y(()=>e.screen.lt.md?100:5);return{columns:Ye,rows:f,initialPagination:{rowsPerPage:c},separator:"vertical",secondColumns:Ge,mobileColumns:Ze,secMobileColumns:Ke,activeProject:l,closedRequestsForProjectSummary:m}}}),et={class:"q-px-none"},tt={class:"row text-caption"},at={class:"col-12 col-md-2"},st=t("span",{class:"text-accent"},"Requests:",-1),ot={class:"text-white q-ml-sm"},lt={class:"col-12 col-md-2"},rt=t("span",{class:"text-accent"},"Classifications:",-1),nt={class:"text-white q-ml-sm"},it={class:"col-12 col-md-2"},dt=t("span",{class:"text-accent"},"Need:",-1),ut={class:"text-white q-ml-sm"},ct={class:"col-12 col-md-2"},mt=t("span",{class:"text-accent"},"Offers:",-1),ft={class:"text-white q-ml-sm"},pt={class:"col-12 col-md-2"},bt=t("span",{class:"text-accent"},"Avg. Rate:",-1),gt={class:"text-white q-ml-sm"},ht={class:"col-12 col-md-2"},$t=t("span",{class:"text-accent"},"Avg. Time Open:",-1),qt={class:"text-white q-ml-sm"},vt={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function yt(e,l,u,m,f,c){return d(),p("div",et,[a(F,{class:"q-mb-md bg-dark"},{default:s(()=>[a(H,{class:"q-pa-sm"},{default:s(()=>[t("div",tt,[t("div",at,[t("div",null,[st,t("span",ot,n(e.closedRequestsForProjectSummary.requestCount),1)])]),t("div",lt,[t("div",null,[rt,t("span",nt,n(e.closedRequestsForProjectSummary.classCount),1)])]),t("div",it,[t("div",null,[dt,t("span",ut,n(e.closedRequestsForProjectSummary.need),1)])]),t("div",ct,[t("div",null,[mt,t("span",ft,n(e.closedRequestsForProjectSummary.offers),1)])]),t("div",pt,[t("div",null,[bt,t("span",gt,"$ "+n(e.closedRequestsForProjectSummary.avgRate),1)])]),t("div",ht,[t("div",null,[$t,t("span",qt,n(e.closedRequestsForProjectSummary.avgDuration),1)])])])]),_:1})]),_:1}),a(V,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Completed Requests for ${e.activeProject[20]}`:"Completed Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no completed requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:s(o=>[a(q,{class:"bg-dark text-white",props:o},{default:s(()=>[a(v,{"auto-width":""}),(d(!0),p(w,null,C(o.cols,r=>(d(),$(v,{key:r.name,props:o},{default:s(()=>[_(n(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":s(({message:o})=>[t("div",vt,[a(L,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(o),1)])]),body:s(o=>[a(q,{props:o},{default:s(()=>[a(h,{"auto-width":""},{default:s(()=>[a(R,{size:"sm",color:"primary",round:"",dense:"",onClick:r=>o.expand=!o.expand,icon:o.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024),(d(!0),p(w,null,C(o.cols,r=>(d(),$(h,{key:r.name,props:o},{default:s(()=>[_(n(r.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),Q(a(q,{props:o},{default:s(()=>[a(h,{colspan:"100%"},{default:s(()=>[t("div",null,[a(V,{dense:"",title:"Classifications","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:o.row.classes,"row-key":"3","table-header-class":"bg-secondary"},null,8,["columns","rows"])])]),_:2},1024)]),_:2},1032,["props"]),[[O,o.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var wt=M(xe,[["render",yt]]);const Ct=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`}],_t=[{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],Rt=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Quantity",align:"right",field:e=>e[18],format:e=>`${e}`}],jt=[{name:3,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Qty",align:"right",field:e=>e[18],format:e=>`${e}`}],kt=E({name:"Open Table",components:{},setup(){const e=I(),{submitCancelRequest:l,submitCancelClassification:u}=P(),{activeProject:m,pendingRequestsForProject:f,pendingRequestsForProjectSummary:c}=A(P()),o=f,r=y(()=>e.screen.lt.md?100:5);function b(i){e.dialog({title:"Confirm",message:"Are you sure you want to cancel this request?",cancel:!0,persistent:!0}).onOk(async()=>{try{await l({request:i}),e.notify({type:"positive",message:"Request Canceled!",position:"top-right"})}catch(g){e.notify({type:"negative",message:g,position:"top-right"})}})}function S(i){e.dialog({title:"Confirm",message:"Are you sure you want to cancel this classification?",cancel:!0,persistent:!0}).onOk(async()=>{try{await u({item:i}),e.notify({type:"positive",message:"Classification Removed!",position:"top-right"})}catch(g){e.notify({type:"negative",message:g,position:"top-right"})}})}return{columns:Ct,rows:o,initialPagination:{rowsPerPage:r},separator:"vertical",secondColumns:Rt,mobileColumns:_t,secMobileColumns:jt,activeProject:m,pendingRequestsForProjectSummary:c,cancelRequest:b,cancelClassification:S}}}),Pt={class:"q-px-none"},St={class:"row text-caption"},Nt={class:"col-12 col-md-2"},Vt=t("span",{class:"text-accent"},"Total Requests:",-1),Tt={class:"text-white q-ml-sm"},Ft={class:"col-12 col-md-2"},Qt=t("span",{class:"text-accent"},"Classifications:",-1),Ot={class:"text-white q-ml-sm"},Et={class:"col-12 col-md-2"},At=t("span",{class:"text-accent"},"Total Need:",-1),Mt={class:"text-white q-ml-sm"},zt={class:"col-12 col-md-2"},Bt=t("span",{class:"text-accent"},"Balance:",-1),Ut={class:"text-white q-ml-sm"},Jt={class:"col-12 col-md-2"},Dt=t("span",{class:"text-accent"},"Avg. Rate:",-1),It={class:"text-white q-ml-sm"},Ht={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Lt(e,l,u,m,f,c){return d(),p("div",Pt,[a(F,{class:"q-mb-md bg-dark"},{default:s(()=>[a(H,{class:"q-pa-sm"},{default:s(()=>[t("div",St,[t("div",Nt,[t("div",null,[Vt,t("span",Tt,n(e.pendingRequestsForProjectSummary.requestCount),1)])]),t("div",Ft,[t("div",null,[Qt,t("span",Ot,n(e.pendingRequestsForProjectSummary.classCount),1)])]),t("div",Et,[t("div",null,[At,t("span",Mt,n(e.pendingRequestsForProjectSummary.need),1)])]),t("div",zt,[t("div",null,[Bt,t("span",Ut,n(e.pendingRequestsForProjectSummary.balance),1)])]),t("div",Jt,[t("div",null,[Dt,t("span",It,"$ "+n(e.pendingRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),a(V,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Pending Requests for ${e.activeProject[20]}`:"Pending Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no pending requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:s(o=>[a(q,{class:"bg-dark text-white",props:o},{default:s(()=>[a(v,{"auto-width":""}),(d(!0),p(w,null,C(o.cols,r=>(d(),$(v,{key:r.name,props:o},{default:s(()=>[_(n(r.label),1)]),_:2},1032,["props"]))),128)),a(v,{"auto-width":""})]),_:2},1032,["props"])]),"no-data":s(({message:o})=>[t("div",Ht,[a(L,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(o),1)])]),body:s(o=>[a(q,{props:o},{default:s(()=>[a(h,{"auto-width":""},{default:s(()=>[a(R,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:r=>o.expand=!o.expand,icon:o.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(d(!0),p(w,null,C(o.cols,r=>(d(),$(h,{key:r.name,props:o},{default:s(()=>[_(n(r.value),1)]),_:2},1032,["props"]))),128)),a(h,{"auto-width":""},{default:s(()=>[a(R,{size:"sm",color:"primary",onClick:r=>e.cancelRequest(o.row),label:"Cancel"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"]),Q(a(q,{props:o},{default:s(()=>[a(h,{colspan:"100%"},{default:s(()=>[a(V,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:o.row.classes,"row-key":"3","table-header-class":"bg-secondary"},{header:s(r=>[a(q,{class:"bg-dark text-white",props:r},{default:s(()=>[(d(!0),p(w,null,C(r.cols,b=>(d(),$(v,{key:b.name,props:r},{default:s(()=>[_(n(b.label),1)]),_:2},1032,["props"]))),128)),a(v,{"auto-width":""})]),_:2},1032,["props"])]),body:s(r=>[a(q,{props:r},{default:s(()=>[(d(!0),p(w,null,C(r.cols,b=>(d(),$(h,{key:b.name,props:r},{default:s(()=>[_(n(b.value),1)]),_:2},1032,["props"]))),128)),a(h,{"auto-width":""},{default:s(()=>[a(R,{size:"sm",color:"primary",onClick:b=>e.cancelClassification(r.row),label:"remove"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[O,o.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var Wt=M(kt,[["render",Lt]]);const Xt=E({setup(){const{requestOptions:e,addedClassifications:l}=A(P()),{pushClassification:u}=P(),m=y(()=>e.value.crafts),f=y(()=>i.value&&i.value!==void 0?i.value.classifications:[]),c=k({craft:k().required("Craft is required.").nullable(),job:k().required("Classification is required.").nullable(),rate:ee().required("Rate is required.").nullable(),qty:ee().required("Craft is required.").nullable()}),{meta:o,errors:r,handleSubmit:b,handleReset:S}=re({validationSchema:c}),{value:i}=j("craft"),{value:g}=j("job"),{value:z}=j("rate"),{value:W}=j("qty"),X=b(async N=>{console.log(N);const B={id:l.value.length+1,craft:N.craft,job:N.job,rate:N.rate,qty:N.qty};console.log(B),u(B),S()});return console.log(e.value),{crafts:m,jobs:f,craft:i,job:g,rate:z,qty:W,formMeta:o,formErrors:r,submit:X}}}),Yt=t("div",{class:"text-dark text-body1"},"Add Classifications",-1),Zt={class:"row items-center"},Gt={class:"col-12 col-md-3 q-px-sm"},Kt={class:"text-caption"},xt={class:"col-12 col-md-4 q-px-sm"},ea={class:"text-caption"},ta={class:"col-12 col-md-2 q-px-sm"},aa={key:0},sa={key:1,class:"text-negative"},oa={class:"text-caption"},la={class:"col-12 col-md-2 q-px-sm"},ra={class:"text-caption"};function na(e,l,u,m,f,c){return d(),p("div",{class:te(e.$q.screen.lt.md?"q-pt-md":"")},[Yt,a(ie,{onSubmit:ne(e.submit,["prevent"])},{default:s(()=>[t("div",Zt,[t("div",Gt,[a(T,{dense:"",label:"Select a Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craft,"onUpdate:modelValue":l[0]||(l[0]=o=>e.craft=o),options:e.crafts,"option-label":"10","display-value":`${e.craft?e.craft[10]:""}`,"bottom-slots":"",error:!!e.formErrors.craft},{error:s(()=>[t("div",Kt,n(e.formErrors.craft),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",xt,[a(T,{dense:"",label:"Select a Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":l[1]||(l[1]=o=>e.job=o),options:e.jobs,"option-label":"18","display-value":`${e.job?e.job[18]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:s(()=>[t("div",ea,n(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",ta,[a(x,{dense:"",type:"number",modelValue:e.rate,"onUpdate:modelValue":l[2]||(l[2]=o=>e.rate=o),"bottom-slots":"",error:!!e.formErrors.rate,prefix:"$","label-slot":""},{label:s(()=>[!e.rate||e.job.avgRate&&e.rate<=e.job.avgRate?(d(),p("span",aa,"Rate")):D("",!0),e.rate&&e.job&&e.rate>e.job.avgRate?(d(),p("span",sa,"Avg rate $ "+n(e.job.avgRate.toFixed(2)),1)):D("",!0)]),error:s(()=>[t("div",oa,n(e.formErrors.rate),1)]),_:1},8,["modelValue","error"])]),t("div",la,[a(x,{dense:"",type:"number",label:"Qty",modelValue:e.qty,"onUpdate:modelValue":l[3]||(l[3]=o=>e.qty=o),"bottom-slots":"",error:!!e.formErrors.qty},{error:s(()=>[t("div",ra,n(e.formErrors.qty),1)]),_:1},8,["modelValue","error"])]),t("div",{class:te(["col-12 col-md-1",e.$q.screen.lt.md?"text-right":"q-px-sm"])},[a(R,{type:"submit",size:"sm",color:"primary",round:e.$q.screen.gt.sm,icon:"add",label:e.$q.screen.gt.sm?"":"Add Classification"},null,8,["round","label"])],2)])]),_:1},8,["onSubmit"])],2)}var ia=M(Xt,[["render",na]]);const da=[{name:1,label:"Craft",align:"left",field:e=>e.craft[10],format:e=>`${e}`,sortable:!0},{name:2,label:"Classification",align:"left",field:e=>e.job[18],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Rate",align:"left",field:e=>e.rate,format:e=>`${e}`,sortable:!0},{name:4,label:"Qty",align:"left",field:e=>e.qty,format:e=>`${e}`,sortable:!0,required:!0}],ua=E({name:"Requests",components:{openTable:Xe,closedTable:wt,pendingTable:Wt,addClassifications:ia},setup(){const e=I(),{requestOptions:l,getClassifications:u}=A(P()),{storeRequest:m,resetRequest:f,spliceClassification:c}=P(),o=ae(0),r=ae(!1);console.log(l.value),$e(u,()=>{console.log(u.value)});const b=k({jobNumber:k().required("Job number is required."),contact:k().required().nullable("Contact is required."),location:k().required().nullable("Location is required."),perdiem:k().nullable(),dateNeeded:qe().required().nullable("Date needed is required.")}),{meta:S,errors:i,handleSubmit:g,handleReset:z}=re({validationSchema:b}),{value:W}=j("jobNumber"),{value:X}=j("contact"),{value:N}=j("location"),{value:B}=j("perdiem"),{value:de}=j("dateNeeded"),ue=g(async U=>{console.log(U),m({request:U}),z(),o.value=1,r.value=!1,e.notify({type:"positive",message:"Request submitted!"})}),ce=y(()=>l.value.jobNumbers),me=y(()=>l.value.perdiem.length>0?l.value.perdiem:null),fe=y(()=>l.value.locations),pe=y(()=>l.value.contacts);function be(){e.dialog({title:"Confirm",message:"Are you sure you want to cancel? All of your progress will be lost.",cancel:!0,persistent:!0}).onOk(()=>{f(),r.value=!1,z()})}function ge(U){e.dialog({title:"Confirm",message:"Are you sure you want to delete this classification?",cancel:!0,persistent:!0}).onOk(()=>{c({item:U})})}return{tab:o,showNew:r,getClassifications:u,columns:da,jobNumbers:ce,perdiems:me,locations:fe,contacts:pe,submitRequest:ue,jobNumber:W,contact:X,location:N,perdiem:B,dateNeeded:de,formMeta:S,formErrors:i,removeClassification:ge,cancelNew:be}}}),ca={class:"q-px-md"},ma={class:"row justify-between"},fa={class:"col-12 col-md-5 q-pr-lg"},pa={class:"text-caption"},ba={class:"text-caption"},ga={class:"text-caption"},ha={class:"text-caption"},$a={class:"text-caption"},qa={class:"col-12 col-md-7"},va={class:"q-mt-md"},ya={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function wa(e,l,u,m,f,c){const o=J("open-table"),r=J("pending-table"),b=J("closed-table"),S=J("add-classifications");return d(),$(ye,{style:{"max-width":"100vw"}},{default:s(()=>[t("div",ca,[a(oe,{duration:100},{default:s(()=>[Q(t("div",null,[a(F,{flat:"",class:"q-mb-sm q-mt-none q-pt-none"},{default:s(()=>[a(se,{align:"right"},{default:s(()=>[e.showNew?D("",!0):(d(),$(R,{key:0,dense:e.$q.screen.lt.md,color:"primary",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:l[0]||(l[0]=i=>e.showNew=!0)},null,8,["dense","label"]))]),_:1})]),_:1}),a(we,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=i=>e.tab=i),"bg-color":"none",color:"dark","active-color":"primary","indicator-color":"accent",align:"justify",dense:""},{default:s(()=>[a(Y,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},null,8,["label"]),a(Y,{name:1,label:e.$q.screen.gt.xs?"Pending Requests":"Pending"},null,8,["label"]),a(Y,{name:2,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},null,8,["label"])]),_:1},8,["modelValue"]),a(Ce,{modelValue:e.tab,"onUpdate:modelValue":l[2]||(l[2]=i=>e.tab=i),animated:""},{default:s(()=>[a(Z,{name:0},{default:s(()=>[a(o)]),_:1}),a(Z,{name:1},{default:s(()=>[a(r)]),_:1}),a(Z,{name:2},{default:s(()=>[a(b)]),_:1})]),_:1},8,["modelValue"])],512),[[O,!e.showNew]])]),_:1}),a(oe,{duration:100},{default:s(()=>[Q(t("div",null,[a(F,null,{default:s(()=>[a(ie,{onSubmit:ne(e.submitRequest,["prevent"])},{default:s(()=>[a(H,null,{default:s(()=>[t("div",ma,[t("div",fa,[a(T,{class:"q-mb-sm",dense:"",label:"Select Job Number","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.jobNumber,"onUpdate:modelValue":l[3]||(l[3]=i=>e.jobNumber=i),options:e.jobNumbers,"option-label":"11","display-value":`${e.jobNumber?e.jobNumber[11]:""}`,"bottom-slots":"",error:!!e.formErrors.jobNumber},{error:s(()=>[t("div",pa,n(e.formErrors.jobNumber),1)]),_:1},8,["modelValue","options","display-value","error"]),a(T,{class:"q-mb-sm",dense:"",label:"Select Contact","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.contact,"onUpdate:modelValue":l[4]||(l[4]=i=>e.contact=i),options:e.contacts,"option-label":"17","display-value":`${e.contact?e.contact[17]:""}`,"bottom-slots":"",error:!!e.formErrors.contact},{error:s(()=>[t("div",ba,n(e.formErrors.contact),1)]),_:1},8,["modelValue","options","display-value","error"]),a(T,{class:"q-mb-sm",dense:"",label:"Select Meeting Location","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.location,"onUpdate:modelValue":l[5]||(l[5]=i=>e.location=i),options:e.locations,"option-label":"6","display-value":`${e.location?e.location[6]:""}`,"bottom-slots":"",error:!!e.formErrors.location},{error:s(()=>[t("div",ga,n(e.formErrors.location),1)]),_:1},8,["modelValue","options","display-value","error"]),a(T,{class:"q-mb-sm",dense:"",label:"Per Diem","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.perdiem,"onUpdate:modelValue":l[6]||(l[6]=i=>e.perdiem=i),options:e.perdiems,"option-label":"20","display-value":`${e.perdiem?e.perdiem[20]:""}`,"bottom-slots":"",error:!!e.formErrors.perdiem},{error:s(()=>[t("div",ha,n(e.formErrors.perdiem),1)]),_:1},8,["modelValue","options","display-value","error"]),a(x,{dense:"",type:"date",modelValue:e.dateNeeded,"onUpdate:modelValue":l[7]||(l[7]=i=>e.dateNeeded=i),"bottom-slots":"",error:!!e.formErrors.dateNeeded,label:"Date Needed","stack-label":""},{error:s(()=>[t("div",$a,n(e.formErrors.dateNeeded),1)]),_:1},8,["modelValue","error"])]),t("div",qa,[e.$q.screen.lt.md?(d(),$(ve,{key:0,color:"primary"})):D("",!0),a(S),t("div",va,[a(V,{dense:"",rows:e.getClassifications,"row-key":"id",columns:e.columns,"table-header-class":"bg-secondary","no-data-label":"At least one classification is required."},{"no-data":s(({message:i})=>[t("div",ya,[a(L,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(i),1)])]),header:s(i=>[a(q,{class:"bg-dark text-white",props:i},{default:s(()=>[(d(!0),p(w,null,C(i.cols,g=>(d(),$(v,{key:g.name,props:i},{default:s(()=>[_(n(g.label),1)]),_:2},1032,["props"]))),128)),a(v,{"auto-width":""})]),_:2},1032,["props"])]),body:s(i=>[a(q,{props:i},{default:s(()=>[(d(!0),p(w,null,C(i.cols,g=>(d(),$(h,{key:g.name,props:i},{default:s(()=>[_(n(g.value),1)]),_:2},1032,["props"]))),128)),a(h,{"auto-width":""},{default:s(()=>[a(R,{size:"xs",round:"",color:"primary",onClick:g=>e.removeClassification(i.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])])])]),_:1}),a(se,{align:"right"},{default:s(()=>[a(R,{color:"dark",label:"Cancel",onClick:e.cancelNew},null,8,["onClick"]),a(R,{disabled:!e.getClassifications.length>0,color:"primary",label:"Submit",type:"submit"},null,8,["disabled"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})],512),[[O,e.showNew]])]),_:1})])]),_:1})}var ja=M(ua,[["render",wa]]);export{ja as default};
