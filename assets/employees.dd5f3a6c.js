import{l as B,bI as F,cx as q,bK as D,bJ as A,r as u,c,cy as m,_ as k,bY as N,p as h,t as I,v as n,d as t,bb as l,ag as P,an as E,a4 as d,ah as O,bZ as J,bQ as U,bR as z,bX as V,bS as L,c4 as Q,aS as R,b_ as x}from"./index.cc00f7f1.js";import{a as W,Q as Y,b as C,c as H}from"./QTabPanels.fee1dc06.js";import{Q as K}from"./QBadge.348fb8e6.js";import{Q as T}from"./QTable.bae7c27d.js";const X=[{name:1,label:"Name",align:"left",field:e=>e.employee[24],format:e=>`${e}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?N.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],Z=[{name:1,label:"Name",align:"left",field:e=>e.employee[24],format:e=>`${e}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?N.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],G=B({name:"Table",components:{},setup(){const e=F(),s=q(),p=D(),{assignmentsForProject:i}=A(s),f=i,{active:b}=A(D()),{getAssignments:a}=q(),w=u(""),g=u(null),y=u(null),S=u(0);a();const v=c(()=>{let o=[];return f.value.forEach(r=>{r[75].toLowerCase().includes(w.value.toLowerCase())&&o.push(r)}),o=g.value?o.filter(r=>m(r[1].$d).tz("America/Chicago").format("MM/DD/YYYY")===m(g.value).tz("America/Chicago").format("MM/DD/YYYY")):o,o=y.value?o.filter(r=>r[68]===y.value):o,o.sort((r,$)=>r.employee[24]>$.employee[24]?1:-1)}),_=c(()=>e.screen.lt.md?100:v.value.length>=25?Math.round(v.value.length/5):5),M=c(()=>[...new Map(i.value.map(o=>[o[68],o[68]])).values()]),j=c(()=>{const o=m().subtract(7,"day");return i.value.filter(r=>m(r[1].$d).isSameOrAfter(o)&&m(r[1].$d).isSameOrBefore(m())).sort((r,$)=>r.employee[24]>$.employee[24]?1:-1)});return{columns:X,mobileColumns:Z,rows:v,initialPagination:{rowsPerPage:_},separator:"vertical",projectStore:p,active:b,search:w,startDateFilter:g,craftOptions:M,craftFilter:y,assignmentsForProject:i,tab:S,newArrivals:j}}}),ee={class:"q-px-sm"},ae={class:"row items-center"},te={class:"col-12 col-md-4 q-px-sm"},le={class:"col-12 col-md-4 q-px-sm"},se={class:"col-12 col-md-4 q-px-sm"},oe={class:"text-dark text-caption text-italic"},re={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},ne={class:"text-dark text-caption text-italic"},ie={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function me(e,s,p,i,f,b){return h(),I("div",ee,[n("div",null,[t(J,{class:"bg-info text-white shadow-2 rounded-borders"},{default:l(()=>[t(W,{modelValue:e.tab,"onUpdate:modelValue":s[0]||(s[0]=a=>e.tab=a),"bg-color":"none","indicator-color":"accent",align:"justify",dense:""},{default:l(()=>[t(Y,{name:0,label:e.$q.screen.gt.xs?"All Employees":"Employees"},null,8,["label"]),t(Y,{name:1,label:"New Arrivals"},{default:l(()=>[e.newArrivals.length>0?(h(),P(K,{key:0,color:"accent",floating:"",transparent:""},{default:l(()=>[E(d(e.newArrivals.length),1)]),_:1})):O("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(H,{modelValue:e.tab,"onUpdate:modelValue":s[4]||(s[4]=a=>e.tab=a),animated:""},{default:l(()=>[t(C,{class:"q-px-xs",name:0},{default:l(()=>[t(U,{flat:""},{default:l(()=>[t(z,{class:"q-pt-none"},{default:l(()=>[n("div",ae,[n("div",te,[t(V,{dense:e.$q.screen.lt.md,modelValue:e.search,"onUpdate:modelValue":s[1]||(s[1]=a=>e.search=a),label:"Search"},null,8,["dense","modelValue"])]),n("div",le,[t(V,{dense:e.$q.screen.lt.md,modelValue:e.startDateFilter,"onUpdate:modelValue":s[2]||(s[2]=a=>e.startDateFilter=a),label:"Arrival Date",type:"date","stack-label":""},null,8,["dense","modelValue"])]),n("div",se,[t(L,{dense:e.$q.screen.lt.md,label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craftFilter,"onUpdate:modelValue":s[3]||(s[3]=a=>e.craftFilter=a),options:e.craftOptions,"use-chips":""},null,8,["dense","modelValue","options"])])])]),_:1})]),_:1}),t(T,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Employees":`Employees for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":l(()=>[n("div",oe,"(Total: "+d(e.assignmentsForProject.length)+" employees)",1)]),"no-data":l(({message:a})=>[n("div",re,[t(Q,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),n("span",null,d(a),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),_:1}),t(C,{class:"q-px-xs",name:1},{default:l(()=>[t(T,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Arrived Last 7 Days":`Arrived Last 7 Days at ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.newArrivals,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":l(()=>[n("div",ne,"(Total: "+d(e.newArrivals.length)+" new arrivals)",1)]),"no-data":l(({message:a})=>[n("div",ie,[t(Q,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),n("span",null,d(a),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),_:1})]),_:1},8,["modelValue"])])])}var de=k(G,[["render",me],["__scopeId","data-v-045ea76a"]]);const ue={name:"Arrivals",components:{employeesTable:de},setup(){return{}}};function ce(e,s,p,i,f,b){const a=R("employees-table");return h(),P(x,{style:{"max-width":"100vw"}},{default:l(()=>[t(a)]),_:1})}var ye=k(ue,[["render",ce]]);export{ye as default};
