import{l as m,_ as y,aS as h,p as $,t as v,d as u,bb as _,bP as b,bO as g,bW as w,cF as q,c as E,c4 as d,v as f,ag as M,c8 as C}from"./index.d258f966.js";function l(t,s=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(!(s instanceof Element))throw new TypeError("Expected a DOM element");return getComputedStyle(s).getPropertyValue(`--q-${t}`).trim()||null}const j=m({props:{title:String,data:Array},setup(t){const s={title:{text:t.title,align:"left"},stroke:{curve:"smooth"},dataLabels:{enabled:!0},colors:[l("primary"),l("accent"),l("info"),l("secondary")]};return{getCssVar:l,options:s,props:t}}});function S(t,s,c,i,p,n){const r=h("apexchart");return $(),v("div",null,[u(g,null,{default:_(()=>[u(b,null,{default:_(()=>[u(r,{height:"500",type:"line",options:t.options,series:t.props.data},null,8,["options","series"])]),_:1})]),_:1})])}var A=y(j,[["render",S]]);const D=m({components:{ApexLine:A},setup(){const{openRequestsForProject:t,closedRequestsForProject:s}=w(q()),c=E(()=>{const p=t.value.concat(s.value).filter(e=>d(e[1].$y).isSame(d().year())),n=[];p.forEach(e=>{e.classes.forEach(a=>{const o={x:d(e[1].$d).format("MMM"),y:a.need,43:a[43],69:a[69],sort:d(e[1].$d).format("M"),date:e[1].$d};n.push(o)})});const r=[...new Map(n.map(e=>[e[69],{label:e[43],value:e[69]}])).values()];return r.forEach(e=>{Object.assign(e,{name:e.label,data:[...new Map(n.filter(a=>a[69]===e.value).map(a=>[a.x,{x:a.x,y:n.filter(o=>o[69]===e.value).filter(o=>o.x===a.x).reduce((o,x)=>o+x.y,0),sort:parseInt(a.sort),date:a.date}])).values()].sort((a,o)=>a.sort>o.sort?1:-1)})}),r});return console.log(c.value),{requestData:c}}}),P={class:"row justify-between"},R={class:"col-6"};function T(t,s,c,i,p,n){const r=h("apex-line");return $(),v("div",null,[f("div",null,[f("div",P,[f("div",R,[u(r,{title:"Monthly Request Totals (YTD)",data:t.requestData},null,8,["data"])])])])])}var k=y(D,[["render",T]]);const B=m({name:"Analytics",components:{Dash:k},setup(){return{}}});function V(t,s,c,i,p,n){const r=h("dash");return $(),M(C,{padding:"",style:{"max-width":"100vw"}},{default:_(()=>[u(r)]),_:1})}var O=y(B,[["render",V]]);export{O as default};
