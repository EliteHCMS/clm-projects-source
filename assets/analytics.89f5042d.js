import{l as $,bD as R,bR as W,bX as D,bE as B,r as g,o as F,w as k,c as T,c_ as P,_ as w,p as o,t as r,v as t,ag as v,bb as d,d as i,F as p,aR as f,bJ as S,bK as E,a4 as n,y as V,ah as y,aS as Q,c1 as U,c2 as J}from"./index.aef8dc32.js";import{Q as x,a as A,b,c as N}from"./QTabPanels.7b5b1108.js";import{Q as C}from"./QMarkupTable.bdaa9c56.js";import{Q as z}from"./QSplitter.7dc7f81c.js";import{analytics as q}from"./analytics.6dab36f0.js";const H=$({components:{},setup(){const e=R();e.loadingBar.setDefaults({color:"accent",size:"10px",position:"top"});const{assignmentsForProject:l}=W(D()),{projectCrafts:_}=W(B()),m=g(null),u=g(null),h=g(null),a=["bg-primary text-white","bg-info text-white","bg-accent text-dark","bg-dark text-white"];return F(async()=>{e.loadingBar.start(),l.value.length>0&&(u.value=await q.calcRateData({assignments:l.value.filter(c=>!c[112]),projectCrafts:_.value}),m.value=u.value[0][3]),e.loadingBar.stop()}),k(l,async()=>{h.value=null,e.loadingBar.start(),l.value.length>0&&(u.value=await q.calcRateData({assignments:l.value.filter(c=>!c[112]),projectCrafts:_.value}),m.value=u.value[0][3]),e.loadingBar.stop()}),k(h,async(c,Ft)=>{h.value&&console.log(h.value)}),{craftWageArray:T(()=>u.value?u.value:[]),colors:a,clickedCraft:h,tab:m,splitValue:g(20),helpers:P}}}),I={class:"row text-caption"},M={class:"col-12 col-md-2"},G=t("div",null,[t("span",{class:"text-accent"},"Total Employees:")],-1),K={class:"text-white q-ml-sm"},L={class:"col-12 col-md-2"},X=t("div",null,[t("span",{class:"text-accent"},"Classifications:")],-1),O={class:"text-white q-ml-sm"},Y={class:"col-12 col-md-2"},Z=t("div",null,[t("span",{class:"text-accent"},"Avg. Wage:")],-1),j={class:"text-white q-ml-sm"},tt={class:"col-12 col-md-2"},et=t("div",null,[t("span",{class:"text-accent"},"Avg. Craft Wage:")],-1),at={class:"text-white q-ml-sm"},st={class:"col-12 col-md-3"},lt=t("div",null,[t("span",{class:"text-accent"},"Wage Status")],-1),ot={class:"text-white q-ml-sm"},nt=t("thead",{class:"bg-dark text-white"},[t("tr",null,[t("th",{class:"text-left"},"Job Title"),t("th",{class:"text-right"},"# of Employees"),t("th",{class:"text-right"},"Fixed Rate"),t("th",{class:"text-right"},"Average Rate"),t("th",{class:"text-right"},"Difference")])],-1),it=["onClick"],ct={class:"text-left"},dt={class:"text-right"},rt={class:"text-right"},ut={class:"text-right"},ht={class:"text-right"},mt={key:1},_t=t("td",{colspan:"100%",class:"text-center"},"No classifications to show",-1),pt=[_t],gt={key:2},ft={colspan:"100%"},vt=t("thead",{class:"bg-dark text-white"},[t("tr",null,[t("th",{class:"text-left"},"Name"),t("th",{class:"text-left"},"Employee ID"),t("th",{class:"text-left"},"Payroll ID"),t("th",{class:"text-left"},"Job Number"),t("th",{class:"text-right"},"Rate")])],-1),yt={class:"text-left"},xt={class:"text-left"},bt={class:"text-left"},$t={class:"text-left"},wt={class:"text-right"},Wt={key:1},kt=t("div",{class:"text-h6"},"Not available on mobile yet.",-1),Vt=[kt];function Ct(e,l,_,m,u,h){return o(),r("div",null,[t("div",null,[e.$q.screen.gt.sm&&e.craftWageArray?(o(),v(z,{key:0,modelValue:e.splitValue,"onUpdate:modelValue":l[2]||(l[2]=a=>e.splitValue=a)},{before:d(()=>[i(A,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=a=>e.tab=a),vertical:e.$q.screen.gt.md,align:"left","indicator-color":"accent","active-bg-color":"dark","active-color":"white"},{default:d(()=>[(o(!0),r(p,null,f(e.craftWageArray,a=>(o(),v(x,{key:a[3],name:a[3],label:a[10]},null,8,["name","label"]))),128))]),_:1},8,["modelValue","vertical"])]),after:d(()=>[i(N,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=a=>e.tab=a),animated:"",vertical:e.$q.screen.gt.md},{default:d(()=>[(o(!0),r(p,null,f(e.craftWageArray,a=>(o(),v(b,{key:a[3],name:a[3],class:"q-pt-none"},{default:d(()=>[t("div",null,[i(S,{class:"q-mb-md bg-dark"},{default:d(()=>[i(E,{class:"q-pa-sm"},{default:d(()=>[t("div",I,[t("div",M,[G,t("div",null,[t("span",K,n(a.craftRoster.length),1)])]),t("div",L,[X,t("div",null,[t("span",O,n(a.classifications.length),1)])]),t("div",Y,[Z,t("div",null,[t("span",j,"$"+n(a.avgWage.toFixed(2)),1)])]),t("div",tt,[et,t("div",null,[t("span",at,"$"+n(a.avgCraftWorkerWage.toFixed(2)),1)])]),t("div",st,[lt,t("div",null,[t("span",ot,n(a.highWages?`${a.highWageCount} with High Wages`:"Good"),1)])])])]),_:2},1024)]),_:2},1024),i(C,null,{default:d(()=>[nt,t("tbody",null,[(o(!0),r(p,null,f(a.classifications,s=>(o(),r(p,{key:s[3]},[s?(o(),r("tr",{key:0,class:V(["cursor-pointer",s.analytics.highWages?"bg-negative text-white":""]),onClick:c=>s.expanded=!s.expanded},[t("td",ct,n(s[18]),1),t("td",dt,n(s.analytics.roster.length),1),t("td",rt,n(s.analytics.fixedWage>0?`$${s.analytics.fixedWage.toFixed(2)}`:"N/A"),1),t("td",ut,n(s.analytics.avgWage>0?`$${s.analytics.avgWage.toFixed(2)}`:"N/A"),1),t("td",ht,n(s.analytics.avgWage>0&&s.analytics.fixedWage>0?`${s.analytics.diff>0?"+":""}${s.analytics.diff}`:"N/A"),1)],10,it)):y("",!0),s?y("",!0):(o(),r("tr",mt,pt)),s.expanded?(o(),r("tr",gt,[t("td",ft,[i(C,{dense:""},{default:d(()=>[vt,t("tbody",null,[(o(!0),r(p,null,f(s.analytics.roster,c=>(o(),r("tr",{key:c[3],class:V(c[116]>s.analytics.fixedWage&&s.analytics.fixedWage>0?"bg-accent":"")},[t("td",yt,n(e.helpers.formatName(c[75])),1),t("td",xt,n(c.employee[378]),1),t("td",bt,n(c.employee[213]===""?"N/A":c.employee[213]),1),t("td",$t,n(c[105]),1),t("td",wt,"$"+n(c[116].toFixed(2)),1)],2))),128))])]),_:2},1024)])])):y("",!0)],64))),128))])]),_:2},1024)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","vertical"])]),_:1},8,["modelValue"])):(o(),r("div",Wt,Vt))])])}var qt=w(H,[["render",Ct]]);const Qt=$({components:{RatesPanel:qt},setup(){return{tab:g(0)}}}),At={class:"q-px-sm"};function Nt(e,l,_,m,u,h){const a=Q("rates-panel");return o(),r("div",At,[i(U,{class:"bg-info text-white shadow-2 rounded-borders"},{default:d(()=>[i(A,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=s=>e.tab=s),"bg-color":"none","indicator-color":"accent"},{default:d(()=>[i(x,{name:0,label:"Rates"}),i(x,{name:1,label:"Requests"})]),_:1},8,["modelValue"])]),_:1}),i(N,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=s=>e.tab=s),animated:""},{default:d(()=>[i(b,{name:0},{default:d(()=>[i(a)]),_:1}),i(b,{name:1})]),_:1},8,["modelValue"])])}var Rt=w(Qt,[["render",Nt]]);const Dt=$({name:"Analytics",components:{Dash:Rt},setup(){return{}}});function Bt(e,l,_,m,u,h){const a=Q("dash");return o(),v(J,{style:{"max-width":"100vw"}},{default:d(()=>[i(a)]),_:1})}var Jt=w(Dt,[["render",Bt]]);export{Jt as default};
