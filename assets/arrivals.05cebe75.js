import{l as S,bI as V,bJ as f,cw as p,bK as q,r as b,aD as Q,aF as I,c as g,_ as w,bY as y,p as D,t as N,d as r,bb as o,bR as P,bX as Y,x as k,bQ as _,cx as v,v as $,c3 as B,a4 as M,aS as T,ag as U,bZ as j}from"./index.86392f86.js";import{Q as x}from"./QTable.5c49b4bd.js";const E=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:2,label:"Workday ID",align:"left",field:e=>e.map.workdayId,format:(e,s)=>s[20]==="In Process"?"W---------":e,sortable:!0},{name:3,label:"Craft",align:"left",field:e=>e.map.craft,format:e=>`${e}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.job,format:e=>`${e}`,sortable:!0},{name:5,label:"Job Number",align:"left",field:e=>e.map.jobNumber,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:e=>e.map.contact,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:7,label:"Start Date",align:"left",field:e=>e.map.start,format:e=>`${y.formatDate(new Date(e),"MM/DD/YYYY")}`,sortable:!0}],R=[{name:1,label:"Name",align:"left",field:e=>e,format:e=>`${e.map.name} (ID: ${e[20]==="In Process"?"W---------":e.map.workdayId})`,sortable:!0},{name:3,label:"Job",align:"left",field:e=>e.map,format:e=>`${e.craft} ${e.job}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:e=>e.map.contact,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:7,label:"Start Date",align:"left",field:e=>e.map.start,format:e=>`${y.formatDate(new Date(e),"MM/DD/YYYY")}`,sortable:!0}],J=S({name:"Arrivals Table",components:{},setup(){const e=V(),{deploymentsForProject:s,alreadyArrived:n}=f(p()),m=s,{updateArrival:c}=p(),{active:u}=f(q()),a=b(""),l=b([]);Q(()=>{n.value.forEach(t=>{l.value.includes(t)||l.value.push(t)})}),I(()=>{n.value.forEach(t=>{l.value.includes(t)||l.value.push(t)})});const i=g(()=>{const t=[];return m.value.forEach(d=>{d[31].toLowerCase().includes(a.value.toLowerCase())&&t.push(d)}),t}),A=g(()=>i.value&&i.value!==void 0?e.screen.lt.md?100:i.value.length>=25?Math.round(i.value.length/5):5:5);function C({rows:t,added:d,evt:K}){c({row:t[0],added:d})}return{columns:E,mobileColumns:R,rows:i,initialPagination:{rowsPerPage:A},separator:"vertical",arrivals:l,updateArrivals:C,active:u,alreadyArrived:n,search:a}}}),W={class:"q-px-sm"},z={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function F(e,s,n,m,c,u){return D(),N("div",W,[r(_,{flat:""},{default:o(()=>[r(P,{class:"q-pt-none"},{default:o(()=>[r(Y,{style:k(e.$q.screen.gt.sm?"max-width: 50%":"min-width: 100%"),modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=a=>e.search=a),label:"Search"},null,8,["style","modelValue"])]),_:1})]),_:1}),r(x,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Expected Arrivals for ${e.active[20]}`:"Arrivals",columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical",selection:"multiple",onSelection:e.updateArrivals,selected:e.alreadyArrived,"table-header-class":"bg-dark text-white","no-data-label":`There are no expected arrivals for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"header-selection":o(a=>[r(v,{disable:"",modelValue:a.selected,"onUpdate:modelValue":l=>a.selected=l},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":o(a=>[r(v,{label:e.$q.screen.lt.sm?"Arrived":"",modelValue:a.selected,"onUpdate:modelValue":l=>a.selected=l},null,8,["label","modelValue","onUpdate:modelValue"])]),"no-data":o(({message:a})=>[$("div",z,[r(B,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),$("span",null,M(a),1)])]),_:1},8,["title-class","title","columns","rows","pagination","onSelection","selected","no-data-label","grid"])])}var h=w(J,[["render",F]]);const L={name:"Arrivals",components:{arrivalTable:h},setup(){return{arrivalTable:h}}};function H(e,s,n,m,c,u){const a=T("arrival-table");return D(),U(j,{style:{"max-width":"100vw"}},{default:o(()=>[r(a)]),_:1})}var G=w(L,[["render",H]]);export{G as default};
